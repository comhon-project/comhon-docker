(this["webpackJsonpcomhon-front"]=this["webpackJsonpcomhon-front"]||[]).push([[0],{34:function(e,t,n){},43:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(11),i=n.n(r),o=n(35),c=n.n(o),s=n(21);n(43),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(44),n(45),n(46);var u=n(1),l=n(7),h=n(4),f=n(5),d=n(6),b=n(14),v=n(25),O=n.n(v),j=(n(48),n(0)),g=n(3),p=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"setCookie",value:function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/;SameSite=Strict"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}}]),e}(),y=n(2),m=n.n(y),w=n(10),k=Object(g.a)("baseURI"),E=Object(g.a)("tokenType"),I=new(function(){function e(){Object(u.a)(this,e),Object.defineProperty(this,k,{writable:!0,value:null}),Object.defineProperty(this,E,{writable:!0,value:null})}return Object(l.a)(e,[{key:"initialize",value:function(e){e.baseURI&&(Object(j.a)(this,k)[k]=e.baseURI)}},{key:"hasBaseURI",value:function(){return null!==Object(j.a)(this,k)[k]&&""!==Object(j.a)(this,k)[k]}},{key:"getBaseURI",value:function(){return Object(j.a)(this,k)[k]}}]),e}()),N=Object(g.a)("message"),_=Object(g.a)("code"),M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(u.a)(this,e),Object.defineProperty(this,N,{writable:!0,value:""}),Object.defineProperty(this,_,{writable:!0,value:0}),Object(j.a)(this,N)[N]=t,Object(j.a)(this,_)[_]=n}return Object(l.a)(e,[{key:"getMessage",value:function(){return Object(j.a)(this,N)[N]}},{key:"getCode",value:function(){return Object(j.a)(this,_)[_]}}]),e}(),A=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"unknown server error (maybe server is not reachable)")}return n}(M),P=Object(g.a)("auth"),x=new(function(){function e(){Object(u.a)(this,e),Object.defineProperty(this,P,{writable:!0,value:null})}return Object(l.a)(e,[{key:"registerAuth",value:function(e){Object(j.a)(this,P)[P]=e}},{key:"get",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,a=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:null,i=!(o.length>4&&void 0!==o[4])||o[4],e.abrupt("return",this.request(t,"GET",n,a,r,i));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,a=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:null,i=!(o.length>4&&void 0!==o[4])||o[4],e.abrupt("return",this.request(t,"POST",n,a,r,i));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"options",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,a=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:null,i=!(o.length>4&&void 0!==o[4])||o[4],e.abrupt("return",this.request(t,"OPTIONS",n,a,r,i));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r,i){var o,c=this,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!(s.length>5&&void 0!==s[5])||s[5],0!==t.indexOf("http:")&&0!==t.indexOf("https:")&&I.hasBaseURI()&&(t=I.getBaseURI()+t),e.next=4,new Promise((function(e,s){var u=new XMLHttpRequest;u.addEventListener("load",(function(){e(u)})),u.addEventListener("error",(function(e){s(new A)}));var l=[];if(null!==i){if("object"!==typeof i)throw new Error("invalid parameter 5 (queryParams). it must be an object");for(var h in i)i.hasOwnProperty(h)&&l.push("".concat(h,"=").concat(i[h]))}var f=0===l.length?"":"?"+l.join("&");if(u.open(n,encodeURI(t+f)),null!==a){if("object"!==typeof a)throw new Error("invalid parameter 3 (headers). it must be an object");for(var d in a)a.hasOwnProperty(d)&&u.setRequestHeader(d,a[d])}o&&null!==Object(j.a)(c,P)[P]&&u.setRequestHeader("Authorization",Object(j.a)(c,P)[P]),u.send(r)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}()}]),e}()),C=Object(g.a)("token"),V=Object(g.a)("username"),T=new(function(){function e(){Object(u.a)(this,e),Object.defineProperty(this,C,{writable:!0,value:null}),Object.defineProperty(this,V,{writable:!0,value:null})}return Object(l.a)(e,[{key:"getToken",value:function(){return Object(j.a)(this,C)[C]}},{key:"getUsername",value:function(){return Object(j.a)(this,V)[V]}},{key:"importToken",value:function(e,t){var n=e.split("."),a=JSON.parse(atob(n[1]));Object(j.a)(this,V)[V]=a.username,Object(j.a)(this,C)[C]=e,x.registerAuth("Bearer "+Object(j.a)(this,C)[C]),t&&p.setCookie("token",e,1)}},{key:"validateToken",value:function(e){return x.get("",{Authorization:"Bearer "+e})}}]),e}()),S=n(16),L=(n(50),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={number:""},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"Home",style:{textAlign:"center"},children:Object(a.jsxs)("h1",{children:["Welcome",T.getUsername()?" "+T.getUsername():""," !"]})})}}]),n}(i.a.Component)),R=(n(51),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={username:"",password:"",errorMessage:""},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData;n.set("username",this.state.username),n.set("password",this.state.password),x.post("http://localhost:8000/api/login",null,n).then((function(e){200===e.status?(T.importToken(e.responseText,!0),t.props.onLogin()):404===e.status?t.setState({errorMessage:e.responseText}):alert("unknown server error when trying to login")})).catch((function(e){alert("unknown server error when trying to login")}))}},{key:"render",value:function(){return Object(a.jsxs)("form",{className:"login",onSubmit:this.handleSubmit,children:[Object(a.jsx)("div",{className:"error",children:this.state.errorMessage}),Object(a.jsxs)("label",{children:["User name:",Object(a.jsx)("input",{type:"text",value:this.state.username,onChange:this.handleChange,id:"username",name:"username"})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:["Password:",Object(a.jsx)("input",{type:"password",value:this.state.password,onChange:this.handleChange,id:"password",name:"password"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"submit",value:"Envoyer"})]})}}]),n}(i.a.Component)),D=Object(b.f)(R),U=(n(56),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).getListModels=a.getListModels.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"getListModels",value:function(e,t){var n=[],r=0;if(null===e)for(t={},r=0;r<this.props.models.length;r++){var i=this.props.models[r];if("undefined"!==typeof i.extends)for(var o=0;o<i.extends.length;o++)"undefined"===typeof t[i.extends[o]]&&(t[i.extends[o]]=[]),t[i.extends[o]].push(r);else n.push(r)}else n=t[e];var c=[];for(r=0;r<n.length;r++){var u=n[r],l=this.props.models[u];"undefined"!==typeof t[l.comhon_model_name]?c.push(Object(a.jsxs)("li",{className:"dropdown-submenu dropright",children:[Object(a.jsx)("div",{children:Object(a.jsx)(s.b,{className:"dropdown-item",to:"/"+l.api_model_name,children:l.api_model_name})}),Object(a.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:this.getListModels(l.comhon_model_name,t)})]},l.comhon_model_name)):c.push(Object(a.jsx)("li",{children:Object(a.jsx)(s.b,{className:"dropdown-item",to:"/"+l.api_model_name,children:l.api_model_name})},l.comhon_model_name))}return c}},{key:"render",value:function(){var e=this.props.appInitialized?"nav-link dropdown-toggle":"nav-link dropdown-toggle disabled";return Object(a.jsx)("div",{children:Object(a.jsxs)("nav",{className:"navbar fixed-top navbar-expand-lg navbar-light bg-light",children:[Object(a.jsx)("span",{className:"navbar-brand",children:"Comhon!"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(a.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(s.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)("div",{className:e,id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Models"}),Object(a.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:this.getListModels(null,null)})]})]}),Object(a.jsx)("ul",{className:"navbar-nav",children:Object(a.jsx)("li",{className:"nav-item",children:this.props.logged?Object(a.jsx)("span",{className:"nav-link",children:T.getUsername()}):Object(a.jsx)(s.b,{className:"nav-link",to:"/login",children:"Login"})})})]})]})})}}]),n}(i.a.Component)),F=(n(57),n(58),n(15)),X=n(9),q=n(13),Y=n(12),G=function(){function e(){if(Object(u.a)(this,e),this.constructor===e)throw new Error("can't instanciate abstract class AbstractModel")}return Object(l.a)(e,[{key:"getClassName",value:function(){throw new Error("function must be overridden in children class")}},{key:"isLoaded",value:function(){return!0}},{key:"isAbstract",value:function(){return!1}},{key:"load",value:function(){var e=Object(w.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getName",value:function(){return null}},{key:"isComplex",value:function(){throw new Error("function must be overridden in children class")}},{key:"_isNextLevelFirstLevel",value:function(e){throw new Error("function must be overridden in children class")}},{key:"_export",value:function(e,t,n,a,r,i,o){throw new Error("function must be overridden in children class")}},{key:"_import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw i.length>4&&void 0!==i[4]&&i[4],new Error("function must be overridden in children class");case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"verifValue",value:function(e){throw new Error("function must be overridden in children class")}},{key:"isEqual",value:function(e){return this===e}}]),e}(),z=Object(g.a)("map"),B=function(){function e(){Object(u.a)(this,e),Object.defineProperty(this,z,{writable:!0,value:new Map})}return Object(l.a)(e,[{key:"getMap",value:function(){return Object(j.a)(this,z)[z]}},{key:"getObject",value:function(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null===t)return null;var r=null,i=e.getModelKey(n).getName();if(Object(j.a)(this,z)[z].has(i)&&Object(j.a)(this,z)[z].get(i).has(t)){var o=Object(j.a)(this,z)[z].get(i).get(t);(o.isA(n)||a&&n.isInheritedFrom(o.getModel()))&&(r=o)}return r}},{key:"hasObject",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null!==this.getObject(e,t,n)}},{key:"addObject",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!1;if(!t.hasCompleteId()||!t.getModel().hasIdProperties())return a;var r=t.getId(),i=e.getModelKey(t.getModel()).getName();if(Object(j.a)(this,z)[z].has(i)&&Object(j.a)(this,z)[z].get(i).has(r)){if(n&&Object(j.a)(this,z)[z].get(i).get(r)!==t)throw new M("different objects with same id. shared id model: '".concat(i,"', id: '").concat(r,"'"))}else Object(j.a)(this,z)[z].has(i)||Object(j.a)(this,z)[z].set(i,new Map),Object(j.a)(this,z)[z].get(i).set(r,t),a=!0;return a}},{key:"removeObject",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!1;if(!t.hasCompleteId()||!t.getModel().hasIdProperties())return a;var r=t.getId(),i=e.getModelKey(t.getModel()).getName();if(Object(j.a)(this,z)[z].has(i)&&Object(j.a)(this,z)[z].get(i).has(r))if(Object(j.a)(this,z)[z].get(i).get(r)===t)Object(j.a)(this,z)[z].get(i).delete(r),a=!0;else if(n)throw new M("different objects with same id. shared id model: '".concat(i,"', id: '").concat(r,"'"));return a}},{key:"reset",value:function(){Object(j.a)(this,z)[z]=new Map}}],[{key:"getModelKey",value:function(e){return null===e.getSharedIdModel()?e:e.getSharedIdModel()}}]),e}(),H=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"build",value:function(e){var t,n,a,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=[[e,!1,!0,!1]],s={};for(null===o&&(o=new B);c.length>0;){var u=c.pop(),l=Object(F.a)(u,4);e=l[0],t=l[1],n=l[2],a=l[3];var h=e.getOid();if(!(h in s))if(s[h]=null,"ComhonArray"===e.getClassName()){if("Model"===e.getUniqueModel().getClassName()){var f,d=Object(X.a)(e);try{for(d.s();!(f=d.n()).done;){var b=Object(F.a)(f.value,2),v=b[0],O=b[1];e.issetValue(v)&&c.push([O,t,n,e.getModel().isIsolatedElement()])}}catch(m){d.e(m)}finally{d.f()}}}else if(n&&o.addObject(e),!a&&(!t||i)){var j,g=Object(X.a)(e.getModel().getComplexProperties());try{for(g.s();!(j=g.n()).done;){var p=j.value,y=p.getName();e.issetValue(y)&&(p.isForeign()?(r||i)&&c.push([e.getValue(y),p.isForeign(),r,p.isIsolated()]):c.push([e.getValue(y),p.isForeign(),!0,p.isIsolated()]))}}catch(m){g.e(m)}finally{g.f()}}}return o}}]),e}(),K=Object(g.a)("startObjectCollection"),J=Object(g.a)("newObjectCollection"),W=Object(g.a)("newForeignObjectCollection"),Q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(u.a)(this,e),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object(j.a)(this,K)[K]=null===t?new B:H.build(t),Object(j.a)(this,W)[W]=new B,Object(j.a)(this,J)[J]=new B}return Object(l.a)(e,[{key:"getNewObjectCollection",value:function(){return this.newObjectCollection}},{key:"getNewForeignObjectCollection",value:function(){return this.newForeignObjectCollection}},{key:"getObject",value:function(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null!==(n=Object(j.a)(this,J)[J].getObject(e,t,a))||null!==(n=Object(j.a)(this,W)[W].getObject(e,t,a))?n:Object(j.a)(this,K)[K].getObject(e,t,a)}},{key:"hasNewObject",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(j.a)(this,J)[J].hasObject(e,t,n)}},{key:"addObject",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t?Object(j.a)(this,W)[W].addObject(e,n):Object(j.a)(this,J)[J].addObject(e,n)}},{key:"hasStartObject",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(j.a)(this,K)[K].hasObject(e,t,n)}},{key:"addStartObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(j.a)(this,K)[K].addObject(e,t)}},{key:"getNotReferencedObjects",value:function(){var e,t=[],n=Object(X.a)(Object(j.a)(this,W)[W].getMap());try{for(n.s();!(e=n.n()).done;){var a,r=e.value,i=Object(X.a)(r[1]);try{for(i.s();!(a=i.n()).done;){var o=Object(F.a)(a.value,2),c=o[0],s=o[1];s.getModel().isMain()||Object(j.a)(this,J)[J].hasObject(c,s.getModel())||t.push(s)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){n.e(u)}finally{n.f()}return t}}]),e}(),Z=Object(g.a)("originalException"),$=Object(g.a)("stackProperties"),ee=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(u.a)(this,n);var i,o=[];e instanceof n?(o=e.getStackProperties(),i=e.getOriginalException()):i=e,null!==r&&o.push(r);var c="."+o.reverse().join("."),s="Something goes wrong on '".concat(c,"' value : \n")+i.getMessage();return a=t.call(this,s,i.getCode()),Object.defineProperty(Object(h.a)(a),Z,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(a),$,{writable:!0,value:[]}),Object(j.a)(Object(h.a)(a),$)[$]=o,Object(j.a)(Object(h.a)(a),Z)[Z]=i,a}return Object(l.a)(n,[{key:"getOriginalException",value:function(){return Object(j.a)(this,Z)[Z]}},{key:"getStackProperties",value:function(){return Object(j.a)(this,$)[$]}},{key:"getStringifiedProperties",value:function(){return"."+Object(j.a)(this,$)[$].reverse().join(".")}}],[{key:"getInstanceWithProperties",value:function(e,t){var a=new n(e);return Object(j.a)(a,$)[$]=t,a}}]),n}(M),te=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"ALREADY_USED_MODEL_NAME_EXCEPTION",get:function(){return 100}},{key:"NOT_DEFINED_MODEL_EXCEPTION",get:function(){return 101}},{key:"UNEXPECTED_MODEL_EXCEPTION",get:function(){return 102}},{key:"UNDEFINED_PROPERTY_EXCEPTION",get:function(){return 103}},{key:"CAST_EXCEPTION",get:function(){return 104}},{key:"PROPERTY_VISIBILITY_EXCEPTION",get:function(){return 105}},{key:"NO_ID_PROPERTY_EXCEPTION",get:function(){return 106}},{key:"REQUESTABLE_PROPERTY_EXCEPTION",get:function(){return 107}},{key:"NOT_SATISFIED_RESTRICTION_EXCEPTION",get:function(){return 200}},{key:"ENUMERATION_EXCEPTION",get:function(){return 201}},{key:"UNEXPECTED_VALUE_TYPE_EXCEPTION",get:function(){return 202}},{key:"ABSTRACT_OBJECT_EXCEPTION",get:function(){return 203}},{key:"MISSING_REQUIRED_VALUE_EXCEPTION",get:function(){return 204}},{key:"MISSING_ID_FOREIGN_VALUE_EXCEPTION",get:function(){return 205}},{key:"INVALID_COMPOSITE_ID_EXCEPTION",get:function(){return 206}},{key:"CONFLICT_VALUES_EXCEPTION",get:function(){return 207}},{key:"DEPENDS_VALUES_EXCEPTION",get:function(){return 208}},{key:"DUPLICATED_ID_EXCEPTION",get:function(){return 300}},{key:"NOT_REFERENCED_VALUE_EXCEPTION",get:function(){return 301}},{key:"CONTEXT_ID_EXCEPTION",get:function(){return 302}},{key:"OBJECT_LOOP_EXCEPTION",get:function(){return 303}},{key:"ABSTRACT_OBJECT_EXPORT_EXCEPTION",get:function(){return 304}},{key:"MALFORMED_INTERVAL_EXCEPTION",get:function(){return 400}},{key:"NOT_SUPPORTED_MODEL_INTERVAL_EXCEPTION",get:function(){return 401}},{key:"NOT_EXISTING_REGEX_EXCEPTION",get:function(){return 402}},{key:"MANIFEST_EXCEPTION",get:function(){return 500}},{key:"RESERVED_WORD_EXCEPTION",get:function(){return 501}},{key:"MALFORMED_REQUEST_EXCEPTION",get:function(){return 700}},{key:"LITERAL_NOT_FOUND_EXCEPTION",get:function(){return 701}},{key:"INCOMPATIBLE_LITERAL_SERIALIZATION_EXCEPTION",get:function(){return 702}},{key:"LITERAL_PROPERTY_AGGREGATION_EXCEPTION",get:function(){return 703}},{key:"MALFORMED_LITERAL_EXCEPTION",get:function(){return 704}},{key:"UNRESOLVABLE_LITERAL_EXCEPTION",get:function(){return 705}},{key:"NOT_LINKABLE_LITERAL_EXCEPTION",get:function(){return 706}},{key:"NOT_ALLOWED_REQUEST_EXCEPTION",get:function(){return 707}},{key:"MULTIPLE_PROPERTY_LITERAL_EXCEPTION",get:function(){return 708}},{key:"NOT_ALLOWED_LITERAL_EXCEPTION",get:function(){return 709}},{key:"SERIALIZATION_EXCEPTION",get:function(){return 800}},{key:"NOT_NULL_CONSTRAINT_EXCEPTION",get:function(){return 801}},{key:"FOREIGN_CONSTRAINT_EXCEPTION",get:function(){return 802}},{key:"UNIQUE_CONSTRAINT_EXCEPTION",get:function(){return 803}},{key:"MANIFEST_SERIALIZATION_EXCEPTION",get:function(){return 804}},{key:"MISSING_NOT_NULL_EXCEPTION",get:function(){return 805}}]),e}(),ne=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){Object(u.a)(this,n);var a="foreign value with model '".concat(e.getModel().getName(),"' and id '").concat(e.getId(),"' not referenced in interfaced object");return t.call(this,a,te.NOT_REFERENCED_VALUE_EXCEPTION)}return n}(M),ae=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return n}(ee),re=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(u.a)(this,n),i=null===e?null:"object"===typeof e?"ComhonObject"===e.getClassName()||"ComhonArray"===e.getClassName()?e.getComhonClass():e.constructor.name:typeof e,a=Array.isArray(a)?"be one of "+JSON.stringify(a):'"be a '.concat(a)+(Array.isArray(o)?" that belong to "+JSON.stringify(o):"");var c=!Array.isArray(o)||"string"!==typeof e&&"number"!==typeof e?" ":" '".concat(e,"' "),s="Argument at index ".concat(r," ")+"must ".concat(a,", ").concat(i).concat(c,"given.");return t.call(this,s)}return n}(M),ie=Object(g.a)("expectedType"),oe=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(u.a)(this,n),i=null===e?"null":"object"===typeof e?"ComhonObject"===e.getClassName()||"ComhonArray"===e.getClassName()?e.getComhonClass():e.constructor.name:typeof e;var l=null!==e&&"object"===typeof e||Array.isArray(e)?" ":" '"+("boolean"===typeof e?e?"true":"false":e)+"' ",f=null===o?" ":" of property '".concat(o,"' "),d="value".concat(f,"must be a ").concat(a,", ").concat(i).concat(l,"given");return r=t.call(this,null!==c&&void 0!==c?c:d,null!==s&&void 0!==s?s:te.UNEXPECTED_VALUE_TYPE_EXCEPTION),Object.defineProperty(Object(h.a)(r),ie,{writable:!0,value:void 0}),Object(j.a)(Object(h.a)(r),ie)[ie]=a,r}return Object(l.a)(n,[{key:"getExpectedType",value:function(){return Object(j.a)(this,ie)[ie]}}]),n}(M),ce=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a,r){Object(u.a)(this,n);var i="value '".concat(e,"' of property '").concat(r,"' doesn't belong to enumeration '")+JSON.stringify(a)+"'";return t.call(this,i,te.ENUMERATION_EXCEPTION)}return n}(M),se=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return n}(ee),ue=[1,2];Object.freeze(ue);var le=Object(g.a)("privateContext"),he=Object(g.a)("updatedValueOnly"),fe=Object(g.a)("propertiesFilter"),de=Object(g.a)("flattenValues"),be=Object(g.a)("stringifiedValues"),ve=Object(g.a)("mergeType"),Oe=Object(g.a)("flagValuesAsUpdated"),je=Object(g.a)("flagObjectAsLoaded"),ge=Object(g.a)("verifyReferences"),pe=Object(g.a)("validate"),ye=function(){function e(){if(Object(u.a)(this,e),Object.defineProperty(this,le,{writable:!0,value:!1}),Object.defineProperty(this,he,{writable:!0,value:!1}),Object.defineProperty(this,fe,{writable:!0,value:[]}),Object.defineProperty(this,de,{writable:!0,value:!1}),Object.defineProperty(this,be,{writable:!0,value:!1}),Object.defineProperty(this,ve,{writable:!0,value:e.MERGE}),Object.defineProperty(this,Oe,{writable:!0,value:!0}),Object.defineProperty(this,je,{writable:!0,value:!0}),Object.defineProperty(this,ge,{writable:!0,value:!0}),Object.defineProperty(this,pe,{writable:!0,value:!0}),this.constructor===e)throw new Error("can't instanciate abstract class Interfacer")}return Object(l.a)(e,null,[{key:"PRIVATE_CONTEXT",get:function(){return"privateContext"}},{key:"ONLY_UPDATED_VALUES",get:function(){return"updatedValueOnly"}},{key:"PROPERTIES_FILTER",get:function(){return"propertiesFilter"}},{key:"FLATTEN_VALUES",get:function(){return"flattenValues"}},{key:"STRINGIFIED_VALUES",get:function(){return"stringifiedValues"}},{key:"FLAG_VALUES_AS_UPDATED",get:function(){return"flagValuesAsUpdated"}},{key:"FLAG_OBJECT_AS_LOADED",get:function(){return"flagObjectAsLoaded"}},{key:"VERIFY_REFERENCES",get:function(){return"verifyReferences"}},{key:"VALIDATE",get:function(){return"validate"}},{key:"MERGE_TYPE",get:function(){return"mergeType"}},{key:"MERGE",get:function(){return 1}},{key:"OVERWRITE",get:function(){return 2}},{key:"INHERITANCE_KEY",get:function(){return"inheritance-"}},{key:"ASSOCIATIVE_KEY",get:function(){return"key-"}},{key:"COMPLEX_ID_KEY",get:function(){return"id"}},{key:"ALLOWED_MERGE_TYPE",get:function(){return ue}}]),Object(l.a)(e,[{key:"isPrivateContext",value:function(){return Object(j.a)(this,le)[le]}},{key:"setPrivateContext",value:function(e){Object(j.a)(this,le)[le]=e}},{key:"hasToExportOnlyUpdatedValues",value:function(){return Object(j.a)(this,he)[he]}},{key:"setExportOnlyUpdatedValues",value:function(e){Object(j.a)(this,he)[he]=e}},{key:"hasPropertiesFilter",value:function(){return Object(j.a)(this,fe)[fe].length>0}},{key:"getPropertiesFilter",value:function(){return this.hasPropertiesFilter()?Object(j.a)(this,fe)[fe]:null}},{key:"resetPropertiesFilter",value:function(){Object(j.a)(this,fe)[fe]=[]}},{key:"setPropertiesFilter",value:function(e){Object(j.a)(this,fe)[fe]=e}},{key:"setFlattenValues",value:function(e){Object(j.a)(this,de)[de]=e}},{key:"hasToFlattenValues",value:function(){return Object(j.a)(this,de)[de]}},{key:"setStringifiedValues",value:function(e){Object(j.a)(this,be)[be]=e}},{key:"isStringifiedValues",value:function(){return Object(j.a)(this,be)[be]}},{key:"setFlagValuesAsUpdated",value:function(e){Object(j.a)(this,Oe)[Oe]=e}},{key:"hasToFlagValuesAsUpdated",value:function(){return Object(j.a)(this,Oe)[Oe]}},{key:"setFlagObjectAsLoaded",value:function(e){Object(j.a)(this,je)[je]=e}},{key:"hasToFlagObjectAsLoaded",value:function(){return Object(j.a)(this,je)[je]}},{key:"setVerifyReferences",value:function(e){Object(j.a)(this,ge)[ge]=e}},{key:"hasToVerifyReferences",value:function(){return Object(j.a)(this,ge)[ge]}},{key:"setValidate",value:function(e){Object(j.a)(this,pe)[pe]=e}},{key:"mustValidate",value:function(){return Object(j.a)(this,pe)[pe]}},{key:"setMergeType",value:function(t){if(-1===!e.ALLOWED_MERGE_TYPE.indexOf(t))throw new re(t,e.ALLOWED_MERGE_TYPE,1);Object(j.a)(this,ve)[ve]=t}},{key:"getMergeType",value:function(){return Object(j.a)(this,ve)[ve]}},{key:"getMediaType",value:function(){throw new Error("function must be overridden in children class")}},{key:"getValue",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"hasValue",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"isNullValue",value:function(e){throw new Error("function must be overridden in children class")}},{key:"isNodeValue",value:function(e){throw new Error("function must be overridden in children class")}},{key:"isArrayNodeValue",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"isComplexInterfacedId",value:function(e){throw new Error("function must be overridden in children class")}},{key:"isFlattenComplexInterfacedId",value:function(e){throw new Error("function must be overridden in children class")}},{key:"setValue",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"unsetValue",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"addValue",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"addAssociativeValue",value:function(e,t,n){throw new Error("function must be overridden in children class")}},{key:"createNode",value:function(){throw new Error("function must be overridden in children class")}},{key:"getNodeClasses",value:function(){throw new Error("function must be overridden in children class")}},{key:"createArrayNode",value:function(){throw new Error("function must be overridden in children class")}},{key:"getArrayNodeClasses",value:function(){throw new Error("function must be overridden in children class")}},{key:"toString",value:function(e){throw new Error("function must be overridden in children class")}},{key:"fromString",value:function(e){throw new Error("function must be overridden in children class")}},{key:"flattenNode",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"unFlattenNode",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"replaceValue",value:function(e,t,n){throw new Error("function must be overridden in children class")}},{key:"hasScalarTypedValues",value:function(){return!0}},{key:"export",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setPreferences(t);try{return e.export(this)}catch(n){throw new ae(n)}}},{key:"import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){var a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>2&&void 0!==r[2]?r[2]:{},this.setPreferences(a),e.prev=2,e.abrupt("return",n.import(t,this));case 6:throw e.prev=6,e.t0=e.catch(2),new se(e.t0);case 9:case"end":return e.stop()}}),e,this,[[2,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setPreferences",value:function(t){if("object"!==typeof t)throw new Error("preferences must be null or an object");if(e.PRIVATE_CONTEXT in t){if("boolean"!==typeof t[e.PRIVATE_CONTEXT])throw new oe(t[e.PRIVATE_CONTEXT],"boolean",e.PRIVATE_CONTEXT);this.setPrivateContext(t[e.PRIVATE_CONTEXT])}if(e.ONLY_UPDATED_VALUES in t){if("boolean"!==typeof t[e.ONLY_UPDATED_VALUES])throw new oe(t[e.ONLY_UPDATED_VALUES],"boolean",e.ONLY_UPDATED_VALUES);this.setExportOnlyUpdatedValues(t[e.ONLY_UPDATED_VALUES])}if(e.PROPERTIES_FILTER in t){if(!Array.isArray(t[e.PROPERTIES_FILTER]))throw new oe(t[e.PROPERTIES_FILTER],"array",e.PROPERTIES_FILTER);this.setPropertiesFilter(e.PROPERTIES_FILTER)}if(e.FLATTEN_VALUES in t){if("boolean"!==typeof t[e.FLATTEN_VALUES])throw new oe(t[e.FLATTEN_VALUES],"boolean",e.FLATTEN_VALUES);this.setFlattenValues(t[e.FLATTEN_VALUES])}if(e.STRINGIFIED_VALUES in t){if("boolean"!==typeof t[e.STRINGIFIED_VALUES])throw new oe(t[e.STRINGIFIED_VALUES],"boolean",e.FLATTEN_VALUES);this.setFlattenValues(t[e.STRINGIFIED_VALUES])}if(e.FLAG_VALUES_AS_UPDATED in t){if("boolean"!==typeof t[e.FLAG_VALUES_AS_UPDATED])throw new oe(t[e.FLAG_VALUES_AS_UPDATED],"boolean",e.FLAG_VALUES_AS_UPDATED);this.setFlagValuesAsUpdated(t[e.FLAG_VALUES_AS_UPDATED])}if(e.FLAG_OBJECT_AS_LOADED in t){if("boolean"!==typeof t[e.FLAG_OBJECT_AS_LOADED])throw new oe(t[e.FLAG_OBJECT_AS_LOADED],"boolean",e.FLAG_OBJECT_AS_LOADED);this.setFlagObjectAsLoaded(t[e.FLAG_OBJECT_AS_LOADED])}if(e.VERIFY_REFERENCES in t){if("boolean"!==typeof t[e.VERIFY_REFERENCES])throw new oe(t[e.VERIFY_REFERENCES],"boolean",e.VERIFY_REFERENCES);this.setVerifyReferences(t[e.VERIFY_REFERENCES])}if(e.VALIDATE in t){if("boolean"!==typeof t[e.VALIDATE])throw new oe(t[e.VALIDATE],"boolean",e.VALIDATE);this.setValidate(t[e.VALIDATE])}if(e.MERGE_TYPE in t){if(-1===e.ALLOWED_MERGE_TYPE.indexOf(t[e.MERGE_TYPE]))throw new ce(t[e.MERGE_TYPE],e.ALLOWED_MERGE_TYPE,e.MERGE_TYPE);this.setMergeType(t[e.MERGE_TYPE])}}}]),e}(),me="http://www.w3.org/2001/XMLSchema-instance",we=Object(g.a)("domDocument"),ke=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(u.a)(this,n),e=t.call(this),Object.defineProperty(Object(h.a)(e),we,{writable:!0,value:void 0}),Object(j.a)(Object(h.a)(e),we)[we]=document.implementation.createDocument(null,null),Object(j.a)(Object(h.a)(e),we)[we].preserveWhiteSpace=!1,e}return Object(l.a)(n,[{key:"_getChildNode",value:function(e,t){var n,a=Object(X.a)(e.childNodes);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.nodeName===t)return r}}catch(i){a.e(i)}finally{a.f()}return null}},{key:"addNullNamespaceURI",value:function(e){e.hasAttribute("xmlns:xsi")||e.setAttributeNode(e.ownerDocument.createAttributeNS(me,"xsi:nil"))}},{key:"setNodeAsNull",value:function(e){e.setAttributeNS(me,"nil","true")}},{key:"_saveXML",value:function(e,t){return(new XMLSerializer).serializeToString(e)}},{key:"getMediaType",value:function(){return"application/xml"}},{key:"getValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var a=this._getChildNode(e,t);return null!==a&&this.isNodeNull(a)&&(a=null),a}return e.hasAttribute(t)?e.getAttribute(t):null}},{key:"isNodeNull",value:function(e){return e.hasAttributeNS(me,"nil")}},{key:"hasValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?null!==this._getChildNode(e,t):e.hasAttribute(t)}},{key:"isNullValue",value:function(e){return e instanceof Element?this.isNodeNull(e):null===e}},{key:"nodeToArray",value:function(e){if(!(e instanceof Element))throw new re(e,"Element",1);var t,n=[],a=Object(X.a)(e.childNodes);try{for(a.s();!(t=a.n()).done;){var r=t.value;r instanceof Element&&n.push(r)}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"nodeToObject",value:function(e){if(!(e instanceof Element))throw new re(e,"Element",1);var t,n={},a=Object(X.a)(e.childNodes);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r instanceof Element){if(!r.hasAttribute(ye.ASSOCIATIVE_KEY))throw new re(e,"Element",1);if(r.getAttribute(ye.ASSOCIATIVE_KEY)in n)throw new M("duplicated key '".concat(r.getAttribute(ye.ASSOCIATIVE_KEY),"'"));n[r.getAttribute(ye.ASSOCIATIVE_KEY)]=r}}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"getNullNodes",value:function(e){var t,n=[],a=Object(X.a)(e.childNodes);try{for(a.s();!(t=a.n()).done;){var r=t.value;r instanceof Element&&this.isNodeNull(r)&&n.push(r.nodeName)}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"isNodeValue",value:function(e){return e instanceof Element}},{key:"isArrayNodeValue",value:function(e,t){return e instanceof Element}},{key:"isComplexInterfacedId",value:function(e){return e instanceof Element&&e.hasAttribute(ye.COMPLEX_ID_KEY)}},{key:"isFlattenComplexInterfacedId",value:function(e){return this.isComplexInterfacedId(e)}},{key:"setValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(e instanceof Element))throw new re(e,"Element",1);if(t instanceof Node)e.ownerDocument!==t.ownerDocument&&(t=e.ownerDocument.importNode(t,!0)),e.appendChild(t);else if(a){var r=e.appendChild(e.ownerDocument.createElement(n));null===t?this.setNodeAsNull(r):r.appendChild(r.ownerDocument.createTextNode(t))}else if(null===t){var i=e.appendChild(e.ownerDocument.createElement(n));this.setNodeAsNull(i)}else e.setAttribute(n,t)}},{key:"unsetValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var a=this._getChildNode(e,t);null!==a&&e.removeChild(a)}else e.removeAttribute(t)}},{key:"addValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setValue(e,t,n,!0)}},{key:"addAssociativeValue",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.setValue(e,t,a,!0),this.setValue(e.lastChild,n,ye.ASSOCIATIVE_KEY)}},{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)throw new re(e,"string",1);return Object(j.a)(this,we)[we].createElement(e)}},{key:"getNodeClasses",value:function(){return["Node"]}},{key:"createArrayNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.createNode(e)}},{key:"getArrayNodeClasses",value:function(){return["Node"]}},{key:"toString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._saveXML(e,t)}},{key:"fromString",value:function(e){try{var t=(new DOMParser).parseFromString(e,"application/xml");return t?1===t.childNodes.length&&t.childNodes.item(0)instanceof Element?Object(j.a)(this,we)[we].importNode(t.childNodes.item(0),!0):(console.log("wrong xml, XMLInterfacer manage only xml with one and only one root node"),null):null}catch(n){return null}}},{key:"flattenNode",value:function(e,t){var n=this._getChildNode(e,t);if(null!==n){var a,r="",i=[],o=Object(X.a)(n.childNodes);try{for(o.s();!(a=o.n()).done;){var c=a.value;i.push(c),r+=this._saveXML(c,!1)}}catch(h){o.e(h)}finally{o.f()}for(var s=0,u=i;s<u.length;s++){var l=u[s];n.removeChild(l)}n.appendChild(n.ownerDocument.createTextNode(r))}}},{key:"unFlattenNode",value:function(e,t){var n=this._getChildNode(e,t);if(null!==n&&""!==this.extractNodeText(n)){var a=(new DOMParser).parseFromString("<temp>"+this.extractNodeText(n)+"</temp>","application/xml");if(1!==a.childNodes.length||!(a.childNodes.item(0)instanceof Element))throw new M("wrong xml, XMLInterfacer manage xml with one and only one root node");var r,i=[],o=Object(X.a)(n.childNodes);try{for(o.s();!(r=o.n()).done;){var c=r.value;i.push(c)}}catch(b){o.e(b)}finally{o.f()}for(var s=0,u=i;s<u.length;s++){var l=u[s];n.removeChild(l)}var h,f=Object(X.a)(a.childNodes.item(0).childNodes);try{for(f.s();!(h=f.n()).done;){var d=h.value;n.appendChild(Object(j.a)(this,we)[we].importNode(d,!0))}}catch(b){f.e(b)}finally{f.f()}}}},{key:"replaceValue",value:function(e,t,n){var a=this._getChildNode(e,t);null!==a&&(e.removeChild(a),this.setValue(e,n,t,!0))}},{key:"extractNodeText",value:function(e){if(this.isNodeNull(e))return null;if(1!==e.childNodes.length)throw new M("malformed node, should only contain one text");if(3!==e.childNodes.item(0).nodeType)throw new M("malformed node, should only contain one text");return e.childNodes.item(0).nodeValue}}]),n}(ye),Ee=Object(g.a)("modelRootInstance"),Ie=Object(g.a)("objectFinder"),Ne=new(function(){function e(){Object(u.a)(this,e),Object.defineProperty(this,Ee,{writable:!0,value:null}),Object.defineProperty(this,Ie,{writable:!0,value:null})}return Object(l.a)(e,[{key:"registerModelRoot",value:function(e){if(null===e||"object"!==typeof e||"ModelRoot"!==e.getClassName())throw new Error("invalid ModelRoot instance");Object(j.a)(this,Ee)[Ee]=e}},{key:"getModelRoot",value:function(){return Object(j.a)(this,Ee)[Ee]}},{key:"registerObjectFinder",value:function(e){Object(j.a)(this,Ie)[Ie]=e}},{key:"getObjectFinder",value:function(){return Object(j.a)(this,Ie)[Ie]}}]),e}()),_e=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;if(Object(u.a)(this,n),(e=t.call(this)).constructor===n)throw new Error("can't instanciate abstract class ModelComplex");return e}return Object(l.a)(n,[{key:"isComplex",value:function(){return!0}},{key:"_verifyReferences",value:function(e,t){var n=t.getNotReferencedObjects();if(n.length>0){var a=Ne.getObjectFinder();if(null===a)throw new Error("ObjectFinder has not been registered");var r,i=new a,o=Object(X.a)(n);try{for(o.s();!(r=o.n()).done;){var c,s=r.value,u=i.execute(e,(c={},Object(S.a)(c,a.ID,s.getId()),Object(S.a)(c,a.MODEL,s.getModel()),Object(S.a)(c,a.SEARCH_FOREIGN,!0),c));if(null===u)throw new M("value should not be null");throw ee.getInstanceWithProperties(new ne(s),u.reverse())}}catch(l){o.e(l)}finally{o.f()}}}},{key:"export",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{this.verifValue(e);var a=new Q,r=t instanceof ke?[]:null,i=n&&"ComhonArray"===e.getClassName(),o={},c=this._export(e,"root",t,!0,a,r,o,i);return t.hasToVerifyReferences()&&"ModelForeign"!==this.getClassName()&&this._verifyReferences(e,a),null!==r&&r.length>0&&this._processNullNodes(t,c,r),c}catch(s){throw new ae(s)}}},{key:"_processNullNodes",value:function(e,t,n){e.addNullNamespaceURI(t);var a,r=Object(X.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.setNodeAsNull(i)}}catch(o){r.e(o)}finally{r.f()}}},{key:"_exportId",value:function(e,t,n,a,r){throw new Error("function must be overridden in children class")}},{key:"import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("function must be overridden in children class");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_importId",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("function must be overridden in children class");case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"_importRoot",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){var a,r,i,o,c,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:null,r=s.length>3&&void 0!==s[3]&&s[3],i=n.getMergeType(),null!==a){e.next=7;break}return e.next=6,this._getRootObject(t,n);case 6:a=e.sent;case 7:return o=this._initObjectCollectionInterfacer(a,i),n.getMergeType()!==ye.OVERWRITE&&"ModelArray"!==this.getClassName()||(c=a.isLoaded(),a.reset(!1),a.setIsLoaded(c)),e.next=11,this._fillObject(a,t,n,!0,o,r);case 11:return n.hasToVerifyReferences()&&this._verifyReferences(a,o),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getRootObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("function must be overridden in children class");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_initObjectCollectionInterfacer",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"_fillObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r,i){var o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw o.length>5&&void 0!==o[5]&&o[5],new Error("function must be overridden in children class");case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}()},{key:"fillObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("function must be overridden in children class");case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getObjectInstance",value:function(){throw new Error("function must be overridden in children class")}}]),n}(G),Me=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(u.a)(this,n),a=Array.isArray(a)?"belong to enumeration "+JSON.stringify(a):"be ".concat(a);var i=null===r?"":" for property '".concat(r,"'"),o="Cannot cast value '".concat(e,"'").concat(i,", value should ").concat(a);return t.call(this,o,te.CAST_EXCEPTION)}return n}(M),Ae=Object(g.a)("modelName"),Pe=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;if(Object(u.a)(this,n),a=t.call(this),Object.defineProperty(Object(h.a)(a),Ae,{writable:!0,value:void 0}),a.constructor===n)throw new Error("can't instanciate abstract class SimpleModel");return Object(j.a)(Object(h.a)(a),Ae)[Ae]=e,a}return Object(l.a)(n,[{key:"getClassName",value:function(){return Object(j.a)(this,Ae)[Ae]}},{key:"getName",value:function(){return Object(j.a)(this,Ae)[Ae]}},{key:"getShortName",value:function(){return Object(j.a)(this,Ae)[Ae]}},{key:"isComplex",value:function(){return!1}},{key:"_isNextLevelFirstLevel",value:function(e){return e}},{key:"_export",value:function(e,t,n,a,r,i,o){return this.exportSimple(e,n)}},{key:"exportSimple",value:function(e,t){return e}},{key:"_import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>4&&void 0!==i[4]&&i[4],e.abrupt("return",this.importValue(t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"importValue",value:function(e,t){if(t.isNullValue(e))return null;t instanceof ke&&e instanceof Element&&(e=t.extractNodeText(e));try{return this._importScalarValue(e,t)}catch(n){if(!(n instanceof Me))throw n;this.verifValue(e)}}},{key:"_importScalarValue",value:function(e,t){return e}}]),n}(G),xe=Object(g.a)("model"),Ce=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;if(Object(u.a)(this,n),a=t.call(this),Object.defineProperty(Object(h.a)(a),xe,{writable:!0,value:void 0}),a.constructor===n)throw new Error("can't instanciate abstract class ModelContainer");return Object(j.a)(Object(h.a)(a),xe)[xe]=e,a}return Object(l.a)(n,[{key:"_getModel",value:function(){return Object(j.a)(this,xe)[xe]}},{key:"getModel",value:function(){var e=Object(w.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)(this,xe)[xe].load();case 2:return e.abrupt("return",Object(j.a)(this,xe)[xe]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getModelName",value:function(){return Object(j.a)(this,xe)[xe].getName()}},{key:"getUniqueModel",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Object(j.a)(this,xe)[xe];t instanceof n;)t=Object(j.a)(t,xe)[xe];return e.next=4,t.load();case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUniqueModelName",value:function(){for(var e=Object(j.a)(this,xe)[xe];e instanceof n;)e=Object(j.a)(e,xe)[xe];return e.getName()}},{key:"getLoadedUniqueModel",value:function(){for(var e=Object(j.a)(this,xe)[xe];e instanceof n;)e=Object(j.a)(e,xe)[xe];if(!e.isLoaded())throw new M("unique model not loaded");return e}},{key:"getLoadedModel",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(j.a)(this,xe)[xe];e>0&&t instanceof n;)t=Object(j.a)(t,xe)[xe],e--;if(e>0)throw new M("invalid depth (out of range)");if(!t.isLoaded())throw new M("model not loaded");return t}},{key:"isUniqueModelSimple",value:function(){return Object(j.a)(this,xe)[xe]instanceof n?Object(j.a)(this,xe)[xe].isUniqueModelSimple():Object(j.a)(this,xe)[xe]instanceof Pe}},{key:"isEqual",value:function(e){return Object(q.a)(Object(Y.a)(n.prototype),"isEqual",this).call(this,e)||this.constructor.name===e.constructor.name&&Object(j.a)(this,xe)[xe].isEqual(Object(j.a)(e,xe)[xe])}}]),n}(_e),Ve=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;if(Object(u.a)(this,n),(a=t.call(this,e)).isUniqueModelSimple())throw new M("ModelForeign can't contain SimpleModel");return a}return Object(l.a)(n,[{key:"getClassName",value:function(){return"ModelForeign"}},{key:"_isNextLevelFirstLevel",value:function(e){return e}},{key:"getObjectInstance",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.getLoadedModel().getObjectInstance(e)}},{key:"_export",value:function(e,t,n,a,r,i,o){return null===e?null:this.getLoadedModel()._exportId(e,t,n,r,i)}},{key:"_exportId",value:function(e,t,n,a,r){throw new M("should not call _exportId via ModelForeign")}},{key:"import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._import(t,n,!0,new Q));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>4&&void 0!==o[4]&&o[4],e.next=3,this.getModel();case 3:return i=e.sent,e.abrupt("return",i._importId(t,n,a,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"_importId",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new M("cannot call _importId via ModelForeign");case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"fillObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new M("cannot fill object via ModelForeign");case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"verifValue",value:function(e){return this.getLoadedModel().verifValue(e),!0}}]),n}(Ce),Te=new(function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getMap",value:function(){throw new Error("function can't be called from MainObjectCollection")}},{key:"addObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.getModel().isMain())throw new M("model of given ComhonObject must be a main Model");return Object(q.a)(Object(Y.a)(n.prototype),"addObject",this).call(this,e,t)}},{key:"removeObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.getModel().isMain())throw new M("model of given ComhonObject must be a main Model");return Object(q.a)(Object(Y.a)(n.prototype),"removeObject",this).call(this,e,t)}}]),n}(B)),Se={json:"application/json"};Object.freeze(Se);var Le={"application/json":"json"};Object.freeze(Le);var Re,De=Object(g.a)("format"),Ue=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";if(Object(u.a)(this,n),e=t.call(this),Object.defineProperty(Object(h.a)(e),De,{writable:!0,value:void 0}),a in Se)Object(j.a)(Object(h.a)(e),De)[De]=a;else{if(!(a in Le)){var r=["json","application/json"];throw new re(a,"string",1,r)}if(Object(j.a)(Object(h.a)(e),De)[De]=Le[a],!(Object(j.a)(Object(h.a)(e),De)[De]in Se))throw new Error("ALLOWED_FORMATS and ALLOWED_MEDIA_TYPES are not synchronized")}return e}return Object(l.a)(n,[{key:"getMediaType",value:function(){return Se[Object(j.a)(this,De)[De]]}},{key:"getValue",value:function(e,t){return t in e?e[t]:null}},{key:"hasValue",value:function(e,t){return t in e}},{key:"isNullValue",value:function(e){return null===e}},{key:"isNodeValue",value:function(e){return null!==e&&"object"===typeof e}},{key:"isArrayNodeValue",value:function(e,t){return!t&&Array.isArray(e)||t&&null!==e&&"object"===typeof e}},{key:"isComplexInterfacedId",value:function(e){return null!==e&&"object"===typeof e}},{key:"isFlattenComplexInterfacedId",value:function(e){return"string"===typeof e&&'{"id":'===e.substr(0,6)}},{key:"setValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===e||"object"!==typeof e)throw new re(e,"Object",1);if(null===n)throw new re(n,"string",3);e[n]=t}},{key:"unsetValue",value:function(e,t){delete e[t]}},{key:"addValue",value:function(e,t){if(!Array.isArray(e))throw new re(e,"array",1);e.push(t)}},{key:"addAssociativeValue",value:function(e,t,n){if(null===e||"object"!==typeof e)throw new re(e,"object",1);if(null===n)throw new re(n,"string",3);e[n]=t}},{key:"createNode",value:function(){return{}}},{key:"getNodeClasses",value:function(){return["object"]}},{key:"createArrayNode",value:function(){return[]}},{key:"getArrayNodeClasses",value:function(){return["array"]}},{key:"toString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(Object(j.a)(this,De)[De]){case"json":return t?JSON.stringify(e,null,2):JSON.stringify(e);default:throw new M("undefined format "+Object(j.a)(this,De)[De])}}},{key:"fromString",value:function(e){switch(Object(j.a)(this,De)[De]){case"json":return JSON.parse(e);default:throw new M("undefined format "+Object(j.a)(this,De)[De])}}},{key:"flattenNode",value:function(e,t){t in e&&(e[t]=JSON.stringify(e[t]))}},{key:"unFlattenNode",value:function(e,t){null!==e&&"string"===typeof e[t]&&(e[t]=JSON.parse(e[t]))}},{key:"replaceValue",value:function(e,t,n){t in e&&this.setValue(e,n,t)}}]),n}(ye),Fe=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){Object(u.a)(this,n);var a=e.getModel().getName(),r=e.getModel().isAbstract()?"model '".concat(a,"' is abstract. Objects with abstract model cannot be flagged as loaded"):"error AbstractObjectException instanciated but model '".concat(a,"' is not abstract");return t.call(this,r,te.ABSTRACT_OBJECT_EXCEPTION)}return n}(M),Xe=Object(g.a)("nextOid"),qe=Object(g.a)("model"),Ye=Object(g.a)("values"),Ge=Object(g.a)("isLoaded"),ze=Object(g.a)("updatedValues"),Be=Object(g.a)("isUpdated"),He=Object(g.a)("oid");Re=Symbol.iterator;var Ke=function(){function e(t){if(Object(u.a)(this,e),Object.defineProperty(this,qe,{writable:!0,value:void 0}),Object.defineProperty(this,Ye,{writable:!0,value:new Map}),Object.defineProperty(this,Ge,{writable:!0,value:!1}),Object.defineProperty(this,ze,{writable:!0,value:new Map}),Object.defineProperty(this,Be,{writable:!0,value:!1}),Object.defineProperty(this,He,{writable:!0,value:void 0}),this.constructor===e)throw new Error("can't instanciate abstract class AbstractComhonObject");"ComhonArray"===this.getClassName()&&(Object(j.a)(this,Ye)[Ye]=[]),Object(j.a)(this,qe)[qe]=t,Object(j.a)(this,He)[He]=Object(j.a)(e,Xe)[Xe],Object(j.a)(e,Xe)[Xe]++}return Object(l.a)(e,[{key:"getClassName",value:function(){throw new Error("function must be overridden in children class")}},{key:"getOid",value:function(){return Object(j.a)(this,He)[He]}},{key:"setValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._hasToUpdateMainObjectCollection(e)?(this.hasCompleteId()&&Te.getObject(this.getId(),Object(j.a)(this,qe)[qe])===this&&Te.removeObject(this,!1),Array.isArray(Object(j.a)(this,Ye)[Ye])?Object(j.a)(this,Ye)[Ye][e]=t:Object(j.a)(this,Ye)[Ye].set(e,t),Te.addObject(this,!1)):Array.isArray(Object(j.a)(this,Ye)[Ye])?Object(j.a)(this,Ye)[Ye][e]=t:Object(j.a)(this,Ye)[Ye].set(e,t),n?(Object(j.a)(this,ze)[ze].set(e,null),Object(j.a)(this,Be)[Be]=!0):Object(j.a)(this,ze)[ze].has(e)&&(Object(j.a)(this,ze)[ze].delete(e),0===Object(j.a)(this,ze)[ze].size&&(Object(j.a)(this,Be)[Be]=!1))}},{key:"_pushValue",value:function(e,t){if(!Array.isArray(Object(j.a)(this,Ye)[Ye]))throw new M("pushValue is callable only from ComhonArray with a NOT associative model array");Object(j.a)(this,Ye)[Ye].push(e),t&&(Object(j.a)(this,Be)[Be]=!0)}},{key:"_popValue",value:function(e){if(!Array.isArray(Object(j.a)(this,Ye)[Ye]))throw new M("popValue is callable only from ComhonArray with a NOT associative model array");return e&&(Object(j.a)(this,Be)[Be]=!0),Object(j.a)(this,Ye)[Ye].pop()}},{key:"_unshiftValue",value:function(e,t){if(!Array.isArray(Object(j.a)(this,Ye)[Ye]))throw new M("unshiftValue is callable only from ComhonArray with a NOT associative model array");Object(j.a)(this,Ye)[Ye].unshift(e),t&&(Object(j.a)(this,Be)[Be]=!0)}},{key:"_shiftValue",value:function(e){if(!Array.isArray(Object(j.a)(this,Ye)[Ye]))throw new M("shiftValue is callable only from ComhonArray with a NOT associative model array");return e&&(Object(j.a)(this,Be)[Be]=!0),Object(j.a)(this,Ye)[Ye].shift()}},{key:"unsetValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.hasValue(e)&&(this._hasToUpdateMainObjectCollection(e)&&Te.removeObject(this),Array.isArray(Object(j.a)(this,Ye)[Ye])?delete Object(j.a)(this,Ye)[Ye][e]:Object(j.a)(this,Ye)[Ye].delete(e),t&&(Object(j.a)(this,Be)[Be]=!0,Object(j.a)(this,ze)[ze].set(e,null)))}},{key:"initValue",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw!(n.length>1&&void 0!==n[1])||n[1],!(n.length>2&&void 0!==n[2])||n[2],new Error("function must be overridden in children class");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){throw new Error("function must be overridden in children class")}},{key:"_reset",value:function(){Array.isArray(Object(j.a)(this,Ye)[Ye])?Object(j.a)(this,Ye)[Ye]=[]:Object(j.a)(this,Ye)[Ye]=new Map,Object(j.a)(this,Be)[Be]=!1,Object(j.a)(this,ze)[ze]=new Map,Object(j.a)(this,Ge)[Ge]=!1}},{key:"getValue",value:function(e){return this.hasValue(e)?Array.isArray(Object(j.a)(this,Ye)[Ye])?Object(j.a)(this,Ye)[Ye][e]:Object(j.a)(this,Ye)[Ye].get(e):null}},{key:"getUpdatedValues",value:function(){return Object(j.a)(this,ze)[ze]}},{key:"hasValue",value:function(e){return Array.isArray(Object(j.a)(this,Ye)[Ye])?e in Object(j.a)(this,Ye)[Ye]:Object(j.a)(this,Ye)[Ye].has(e)}},{key:"issetValue",value:function(e){return Array.isArray(Object(j.a)(this,Ye)[Ye])?e in Object(j.a)(this,Ye)[Ye]&&null!==Object(j.a)(this,Ye)[Ye][e]:Object(j.a)(this,Ye)[Ye].has(e)&&null!==Object(j.a)(this,Ye)[Ye].get(e)}},{key:"hasValues",value:function(e){var t,n=Object(X.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!this.hasValue(a))return!1}}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"count",value:function(){return Array.isArray(Object(j.a)(this,Ye)[Ye])?Object(j.a)(this,Ye)[Ye].length:Object(j.a)(this,Ye)[Ye].size}},{key:"getObjectValues",value:function(){var t,n=new Map,a=Object(X.a)(this);try{for(a.s();!(t=a.n()).done;){var r=Object(F.a)(t.value,2),i=r[0],o=r[1];o instanceof e&&o.getUniqueModel()instanceof Sa&&n.set(i,o)}}catch(c){a.e(c)}finally{a.f()}return n}},{key:Re,value:function(){var e=this;if(Array.isArray(Object(j.a)(this,Ye)[Ye])){var t=-1;return{next:function(){return{value:[++t,Object(j.a)(e,Ye)[Ye][t]],done:!(t in Object(j.a)(e,Ye)[Ye])}}}}return Object(j.a)(this,Ye)[Ye][Symbol.iterator]()}},{key:"isUpdated",value:function(){throw new Error("function must be overridden in children class")}},{key:"isIdUpdated",value:function(){throw new Error("function must be overridden in children class")}},{key:"isUpdatedValue",value:function(e){throw new Error("function must be overridden in children class")}},{key:"isFlaggedAsUpdated",value:function(){return Object(j.a)(this,Be)[Be]}},{key:"isValueFlaggedAsUpdated",value:function(e){return Object(j.a)(this,ze)[ze].has(e)}},{key:"resetUpdatedStatus",value:function(){throw new Error("function must be overridden in children class")}},{key:"_resetUpdatedStatusRecursive",value:function(e){throw new Error("function must be overridden in children class")}},{key:"_resetUpdatedStatus",value:function(){Object(j.a)(this,Be)[Be]=!1,Object(j.a)(this,ze)[ze]=new Map}},{key:"flagValueAsUpdated",value:function(e){return!!this.hasValue(e)&&(Object(j.a)(this,Be)[Be]=!0,Object(j.a)(this,ze)[ze].set(e,null),!0)}},{key:"isLoaded",value:function(){return Object(j.a)(this,Ge)[Ge]}},{key:"setIsLoaded",value:function(e){if(e&&!Object(j.a)(this,Ge)[Ge]&&Object(j.a)(this,qe)[qe].isAbstract())throw new Fe(this);Object(j.a)(this,Ge)[Ge]=e}},{key:"validate",value:function(){throw new Error("function must be overridden in children class")}},{key:"isValid",value:function(){throw new Error("function must be overridden in children class")}},{key:"_updateModel",value:function(e){Object(j.a)(this,qe)[qe]=e}},{key:"getModel",value:function(){return Object(j.a)(this,qe)[qe]}},{key:"_hasToUpdateMainObjectCollection",value:function(e){throw new Error("function must be overridden in children class")}},{key:"getUniqueModel",value:function(){return this.getModel()}},{key:"getComhonClass",value:function(){throw new Error("function must be overridden in children class")}},{key:"loadValue",value:function(e){throw new Error("function must be overridden in children class")}},{key:"export",value:function(e){try{return Object(j.a)(this,qe)[qe].export(this,e)}catch(t){throw new ae(t)}}},{key:"fill",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){var a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(r.length>2&&void 0!==r[2])||r[2],e.prev=1,e.abrupt("return",Object(j.a)(this,qe)[qe].fillObject(this,t,n,a));case 5:throw e.prev=5,e.t0=e.catch(1),new se(e.t0);case 8:case"end":return e.stop()}}),e,this,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){try{var e=new Ue;return e.setPrivateContext(!0),e.setVerifyReferences(!1),e.setValidate(!1),JSON.stringify(e.export(this),null,2)+"\n"}catch(t){console.log("object can't be stringified because it is invalid : "+t.getMessage())}return""}}]),e}();Object.defineProperty(Ke,Xe,{writable:!0,value:0});var Je,We=Ke,Qe=n(37),Ze=Object(g.a)("isUpdated"),$e=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Object.defineProperty(Object(h.a)(e),Ze,{writable:!0,value:!1}),e}return Object(l.a)(n,[{key:"setDate",value:function(e){Object(q.a)(Object(Y.a)(n.prototype),"setDate",this).call(this,e),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setFullYear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(q.a)(Object(Y.a)(n.prototype),"setFullYear",this).call(this,e,t,a),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setHours",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(q.a)(Object(Y.a)(n.prototype),"setHours",this).call(this,e,t,a,r),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setMilliseconds",value:function(e){Object(q.a)(Object(Y.a)(n.prototype),"setMilliseconds",this).call(this,e),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setMinutes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(q.a)(Object(Y.a)(n.prototype),"setMinutes",this).call(this,e,t,a),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setMonth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(q.a)(Object(Y.a)(n.prototype),"setMonth",this).call(this,e,t),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setSeconds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(q.a)(Object(Y.a)(n.prototype),"setSeconds",this).call(this,e,t),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setTime",value:function(e){Object(q.a)(Object(Y.a)(n.prototype),"setTime",this).call(this,e),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setUTCDate",value:function(e){Object(q.a)(Object(Y.a)(n.prototype),"setUTCDate",this).call(this,e),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setUTCFullYear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(q.a)(Object(Y.a)(n.prototype),"setUTCFullYear",this).call(this,e,t,a),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setUTCHours",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(q.a)(Object(Y.a)(n.prototype),"setUTCHours",this).call(this,e,t,a,r),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setUTCMilliseconds",value:function(e){Object(q.a)(Object(Y.a)(n.prototype),"setUTCMilliseconds",this).call(this,e),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setUTCMinutes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(q.a)(Object(Y.a)(n.prototype),"setUTCMinutes",this).call(this,e,t,a),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setUTCMonth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(q.a)(Object(Y.a)(n.prototype),"setUTCMonth",this).call(this,e,t),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setUTCSeconds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(q.a)(Object(Y.a)(n.prototype),"setUTCSeconds",this).call(this,e,t),Object(j.a)(this,Ze)[Ze]=!0}},{key:"setYear",value:function(e){Object(q.a)(Object(Y.a)(n.prototype),"setYear",this).call(this,e),Object(j.a)(this,Ze)[Ze]=!0}},{key:"isUpdated",value:function(){return Object(j.a)(this,Ze)[Ze]}},{key:"resetUpdatedStatus",value:function(){Object(j.a)(this,Ze)[Ze]=!1}}]),n}(Object(Qe.a)(Date)),et=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.ID)}return Object(l.a)(n,null,[{key:"ID",get:function(){return"dateTime"}}]),Object(l.a)(n,[{key:"exportSimple",value:function(e,t){return null===e?e:this.toString(e)}},{key:"_importScalarValue",value:function(e,t){if("string"!==typeof e)throw new oe(e,"string");return this.fromString(e)}},{key:"fromString",value:function(e){return new $e(e)}},{key:"toString",value:function(e){return e.toISOString()}},{key:"verifValue",value:function(e){if(!(e instanceof $e))throw new oe(e,"ComhonDateTime");return!0}}]),n}(Pe),tt=function(){function e(){if(Object(u.a)(this,e),this.constructor===e)throw new Error("can't instanciate abstract class Restriction")}return Object(l.a)(e,[{key:"satisfy",value:function(e){throw new Error("function must be overridden in children class")}},{key:"isEqual",value:function(e){throw new Error("function must be overridden in children class")}},{key:"isAllowedModel",value:function(e){throw new Error("function must be overridden in children class")}},{key:"toMessage",value:function(e){throw new Error("function must be overridden in children class")}},{key:"toString",value:function(){throw new Error("function must be overridden in children class")}}],[{key:"compare",value:function(e,t){if(e.length!==t.length)return!1;var n,a={},r=Object(X.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;a[i.constructor.name]=i}}catch(l){r.e(l)}finally{r.f()}var o,c=Object(X.a)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value,u=s.constructor.name;if(!(u in a)||!s.isEqual(a[u]))return!1}}catch(l){c.e(l)}finally{c.f()}return!0}},{key:"getFirstNotSatisifed",value:function(e,t){var n,a=Object(X.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(!r.satisfy(t))return r}}catch(i){a.e(i)}finally{a.f()}return null}}]),e}(),nt=Object(g.a)("value"),at=Object(g.a)("restriction"),rt=Object(g.a)("increment"),it=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(u.a)(this,n),r=t.call(this,null,null,null,a.toMessage(e,i),te.NOT_SATISFIED_RESTRICTION_EXCEPTION),Object.defineProperty(Object(h.a)(r),nt,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(r),at,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(r),rt,{writable:!0,value:void 0}),Object(j.a)(Object(h.a)(r),nt)[nt]=e,Object(j.a)(Object(h.a)(r),at)[at]=a,Object(j.a)(Object(h.a)(r),rt)[rt]=i,r}return Object(l.a)(n,[{key:"getValue",value:function(){return Object(j.a)(this,nt)[nt]}},{key:"getRestriction",value:function(){return Object(j.a)(this,at)[at]}},{key:"getIncrement",value:function(){return Object(j.a)(this,rt)[rt]}}]),n}(oe),ot=Object(g.a)("modelArray"),ct=Object(g.a)("depth"),st=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a,r){var i;Object(u.a)(this,n);var o,c="",s=e.getModel();if(r>0&&"ComhonArray"===e.getClassName()&&(s=s.getModel(r-1)),"ModelArray"!==s.getClassName())c="model must be a ModelArray, model '".concat(s.getName(),"' given. ");else if(a.isAssociative()!==s.isAssociative())o=a.isAssociative()?"must be":"must not be",c="ModelArray ".concat(o," associative. ");else if(a.getElementName()!==s.getElementName())c="ModelArray element name must be '".concat(a.getElementName(),"', '").concat(s.getElementName(),"' given. ");else if(a.isNotNullElement()!==s.isNotNullElement())o=a.isNotNullElement()?"must have":"must not have",c="ModelArray ".concat(o," not null element. ");else if(a.isIsolatedElement()!==s.isIsolatedElement())o=a.isNotNullElement()?"must be":"must not be",c="ModelArray ".concat(o," isolated element. ");else if("Model"===s.getModel().getClassName()&&n._isInerited(s,a)){var l,f="",d=Object(X.a)(a.getArrayRestrictions());try{for(d.s();!(l=d.n()).done;){f+=" - "+l.value.toString()+"(on comhon array)\n"}}catch(E){d.e(E)}finally{d.f()}var b,v=Object(X.a)(a.getElementRestrictions());try{for(v.s();!(b=v.n()).done;){f+=" - "+b.value.toString()+"(on elements)\n"}}catch(E){v.e(E)}finally{v.f()}var O="";if(e.getModel()instanceof a){var g,p=Object(X.a)(e.getModel().getArrayRestrictions());try{for(p.s();!(g=p.n()).done;){O+=" - "+g.value.toString()+"(on comhon array)\n"}}catch(E){p.e(E)}finally{p.f()}var y,m=Object(X.a)(e.getModel().getElementRestrictions());try{for(m.s();!(y=m.n()).done;){O+=" - "+y.value.toString()+"(on elements)\n"}}catch(E){m.e(E)}finally{m.f()}}c="value ".concat(e.getClassName()," must have restrictions :\n")+f+"restrictions given : \n"+O}else{var w=a.getModelName(),k="ModelArray"===s.getModel().getClassName()?"ModelArray":"'".concat(s.getModel().getName(),"'");c="model must be a '".concat(w,"', model '").concat(k,"' given. ")}return r>0&&(c+="array depth : "+r),i=t.call(this,c,te.UNEXPECTED_VALUE_TYPE_EXCEPTION),Object.defineProperty(Object(h.a)(i),ot,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(i),ct,{writable:!0,value:void 0}),Object(j.a)(Object(h.a)(i),ot)[ot]=a,Object(j.a)(Object(h.a)(i),ct)[ct]=r,i}return Object(l.a)(n,[{key:"getModelArray",value:function(){return Object(j.a)(this,ot)[ot]}},{key:"getDepth",value:function(){return Object(j.a)(this,ct)[ct]}}],[{key:"_isInerited",value:function(e,t){try{var n=t.getLoadedModel();return e.getModel().isInheritedFrom(n)}catch(a){return!1}}}]),n}(oe),ut=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a,r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Object(u.a)(this,n),e instanceof Ya)r=e;else{if(!(e instanceof Sa)&&!(e instanceof Pe))throw new M("invalid model, ComhonArray must have ModelUnique or ModelArray");r=new Ya(e,c,null===o?e.getShortName():o)}return r.getLoadedUniqueModel(),(a=t.call(this,r)).setIsLoaded(i),a}return Object(l.a)(n,[{key:"getClassName",value:function(){return"ComhonArray"}},{key:"getUniqueModel",value:function(){return this.getModel().getLoadedUniqueModel()}},{key:"reset",value:function(){this._reset()}},{key:"loadValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(this.getModel()instanceof Sa))throw new M("cannot load value, ComhonArray must contain comhon objects");if(!this.issetValue(e))throw new M("cannot load value '".concat(e,"', value not set"));var a=this.getValue(e);return a.load(t,n)}},{key:"pushValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{this.getModel().verifElementValue(e)}catch(n){throw n instanceof it?new it(n.getValue(),n.getRestriction(),n.getIncrement()):n instanceof st?new st(e,n.getModelArray(),n.getDepth()):n instanceof oe?new oe(e,n.getExpectedType()):n}this._pushValue(e,t)}},{key:"popValue",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._popValue(e)}},{key:"unshiftValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{this.getModel().verifElementValue(e)}catch(n){throw n instanceof it?new it(n.getValue(),n.getRestriction(),n.getIncrement()):n instanceof st?new st(e,n.getModelArray(),n.getDepth()):n instanceof oe?new oe(e,n.getExpectedType()):n}this._unshiftValue(e,t)}},{key:"shiftValue",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._shiftValue(e)}},{key:"setValue",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{this.getModel().verifElementValue(t)}catch(r){throw r instanceof it?new it(r.getValue(),r.getRestriction(),r.getIncrement()):r instanceof st?new st(t,r.getModelArray(),r.getDepth()):r instanceof oe?new oe(t,r.getExpectedType()):r}Object(q.a)(Object(Y.a)(n.prototype),"setValue",this).call(this,e,t,a)}},{key:"initValue",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],a=!(i.length>2&&void 0!==i[2])||i[2],e.next=4,this.getInstanceValue(n);case 4:return r=e.sent,this.setValue(t,r,a),e.abrupt("return",this.getValue(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInstanceValue",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t,n,a=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],e.next=3,this.getModel().getModel();case 3:if((n=e.sent)instanceof _e){e.next=6;break}throw new M("ComhonArray contain a simple model and can't have instance value");case 6:return e.abrupt("return",n.getObjectInstance(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"canAddValue",value:function(){var e,t=Object(X.a)(this.getModel().getArrayRestrictions());try{for(t.s();!(e=t.n()).done;){if(!e.value.satisfy(this,1))return!1}}catch(n){t.e(n)}finally{t.f()}return!0}},{key:"canRemoveValue",value:function(){if(0===this.count())return!1;var e,t=Object(X.a)(this.getModel().getArrayRestrictions());try{for(t.s();!(e=t.n()).done;){if(!e.value.satisfy(this,-1))return!1}}catch(n){t.e(n)}finally{t.f()}return!0}},{key:"resetUpdatedStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){var t={};this._resetUpdatedStatusRecursive(t)}else if(this._resetUpdatedStatus(),this.getModel().getModel()instanceof et){var n,a=Object(X.a)(this);try{for(a.s();!(n=a.n()).done;){var r=n.value;r[1]instanceof $e&&r[1].resetUpdatedStatus(!1)}}catch(i){a.e(i)}finally{a.f()}}}},{key:"_resetUpdatedStatusRecursive",value:function(e){if(this.getOid()in e){if(e[this.getOid()]>0)return void console.log("Warning loop detected")}else e[this.getOid()]=0;if(e[this.getOid()]++,this._resetUpdatedStatus(),this.getModel().getModel()instanceof et){var t,n=Object(X.a)(this);try{for(n.s();!(t=n.n()).done;){var a=t.value;a[1]instanceof $e&&a[1].resetUpdatedStatus(!1)}}catch(c){n.e(c)}finally{n.f()}}else if(this.getModel().getModel().isComplex()){var r,i=Object(X.a)(this);try{for(i.s();!(r=i.n()).done;){var o=r.value;o[1]instanceof We&&o[1]._resetUpdatedStatusRecursive(e)}}catch(c){i.e(c)}finally{i.f()}}e[this.getOid()]--}},{key:"isUpdated",value:function(){if(!this.isFlaggedAsUpdated())if(this.getModel().getModel().isComplex()){var e,t=Object(X.a)(this);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n[1]instanceof We&&n[1].isUpdated())return!0}}catch(o){t.e(o)}finally{t.f()}}else if(this.getModel().getModel()instanceof et){var a,r=Object(X.a)(this);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i[1]instanceof $e&&i[1].isUpdated())return!0}}catch(o){r.e(o)}finally{r.f()}}return this.isFlaggedAsUpdated()}},{key:"isIdUpdated",value:function(){if(!this.isFlaggedAsUpdated()&&this.getModel().getModel().isComplex()){var e,t=Object(X.a)(this);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n[1]instanceof We&&n[1].isIdUpdated())return!0}}catch(a){t.e(a)}finally{t.f()}}return this.isFlaggedAsUpdated()}},{key:"isUpdatedValue",value:function(e){if(!this.isFlaggedAsUpdated())if(this.getModel().getModel().isComplex()){var t=this.getValue(e);if(t instanceof We&&t.isUpdated())return!0}else if(this.getModel().getModel()instanceof et){var n=this.getValue(e);if(n instanceof $e&&n.isUpdated())return!0}return this.isFlaggedAsUpdated()}},{key:"validate",value:function(){var e=tt.getFirstNotSatisifed(this.getModel().getArrayRestrictions(),this);if(null!==e)throw new it(this,e)}},{key:"isValid",value:function(){return null===tt.getFirstNotSatisifed(this.getModel().getArrayRestrictions(),this)}},{key:"getComhonClass",value:function(){return"ComhonArray(".concat(this.getModel().getUniqueModelName(),")")}},{key:"_hasToUpdateMainObjectCollection",value:function(e){return!1}}]),n}(We),lt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(u.a)(this,n),t.call(this,""===a?e.responseText:a,e.status)}return n}(M),ht=Object(g.a)("apiModels"),ft=Object(g.a)("apiToComhon"),dt=Object(g.a)("comhonToApi"),bt=new(function(){function e(){Object(u.a)(this,e),Object.defineProperty(this,ht,{writable:!0,value:[]}),Object.defineProperty(this,ft,{writable:!0,value:{}}),Object.defineProperty(this,dt,{writable:!0,value:{}})}return Object(l.a)(e,[{key:"getModelName",value:function(e){return Object(j.a)(this,ft)[ft][e]?Object(j.a)(this,ft)[ft][e]:null}},{key:"getApiModelName",value:function(e){return Object(j.a)(this,dt)[dt][e]?Object(j.a)(this,dt)[dt][e]:null}},{key:"getApiModelNames",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t,n,a,r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(o.length>0&&void 0!==o[0])||o[0],e.next=3,x.get("models");case 3:if(401!==(n=e.sent).status){e.next=8;break}if(t){e.next=7;break}throw new lt(n,"Unauthorized to retrieve models list");case 7:return e.abrupt("return",Object(j.a)(this,ht)[ht]);case 8:if(200===n.status){e.next=10;break}throw new lt(n,"unknown server error when trying retrieve models list");case 10:Object(j.a)(this,ht)[ht]=JSON.parse(n.responseText),Object(j.a)(this,ft)[ft]={},Object(j.a)(this,dt)[dt]={},a=Object(X.a)(Object(j.a)(this,ht)[ht]);try{for(a.s();!(r=a.n()).done;)(i=r.value).api_model_name?(Object(j.a)(this,ft)[ft][i.api_model_name]=i.comhon_model_name,Object(j.a)(this,dt)[dt][i.comhon_model_name]=i.api_model_name):(Object(j.a)(this,ft)[ft][i.comhon_model_name]=i.comhon_model_name,Object(j.a)(this,dt)[dt][i.comhon_model_name]=i.comhon_model_name)}catch(c){a.e(c)}finally{a.f()}return e.abrupt("return",Object(j.a)(this,ht)[ht]);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),vt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(u.a)(this,n);var i=r?"impossible to unset required value '".concat(a,"' on comhon object with model '").concat(e.getModel().getName(),"'"):"missing required value '".concat(a,"' on comhon object with model '").concat(e.getModel().getName(),"'");return t.call(this,i,te.MISSING_REQUIRED_VALUE_EXCEPTION)}return n}(M),Ot=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){Object(u.a)(this,n);var r="properties values "+JSON.stringify(a)+" cannot coexist for model '".concat(e.getName(),"'");return t.call(this,r,te.CONFLICT_VALUES_EXCEPTION)}return n}(M),jt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(u.a)(this,n);var i=r?"property value '".concat(e,"' can't be unset when property value '").concat(a,"' is set"):"property value '".concat(e,"' can't be set without property value '").concat(a,"'");return t.call(this,i,te.DEPENDS_VALUES_EXCEPTION)}return n}(M),gt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){Object(u.a)(this,n);var r="Cannot cast object, '".concat(e.getName(),"' is not inherited from '").concat(a.getName(),"'");return t.call(this,r,te.CAST_EXCEPTION)}return n}(M),pt=Object(g.a)("isCasted"),yt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Object(u.a)(this,n),!(e instanceof Sa))throw new M("invalid model, ComhonObject must have instance of Model");if("ModelRoot"===e.getClassName())throw new M("invalid model, ComhonObject cannot have instance of ModelRoot");if(!e.isLoaded())throw new M("model '".concat(e.getName(),"' not loaded"));a=t.call(this,e),Object.defineProperty(Object(h.a)(a),pt,{writable:!0,value:!1});var i,o=Object(X.a)(e.getPropertiesWithDefaultValues());try{for(o.s();!(i=o.n()).done;){var c=i.value;a.setValue(c.getName(),c.getDefaultValue(),!1)}}catch(s){o.e(s)}finally{o.f()}return a.setIsLoaded(r),a}return Object(l.a)(n,[{key:"getClassName",value:function(){return"ComhonObject"}},{key:"reset",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Map;if(this.getModel().hasIdProperties())if(e)this.getModel().isMain()&&Te.removeObject(this,!1);else{var n,a=Object(X.a)(this.getModel().getIdProperties());try{for(a.s();!(n=a.n()).done;){var r=n.value;this.issetValue(r.getName())&&t.set(r.getName(),this.getValue(r.getName()))}}catch(d){a.e(d)}finally{a.f()}}var i,o,c,s=Object(X.a)(this.getModel().getPropertiesWithDefaultValues());try{for(s.s();!(i=s.n()).done;){var u=i.value;t.set(u.getName(),u.getDefaultValue())}}catch(d){s.e(d)}finally{s.f()}this._reset();var l,h=Object(X.a)(t);try{for(h.s();!(l=h.n()).done;){var f=Object(F.a)(l.value,2);o=f[0],c=f[1],this.setValue(o,c,!1)}}catch(d){h.e(d)}finally{h.f()}}},{key:"setId",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.getModel().hasIdProperties())throw new M("cannot set id. model ".concat(this.getModel().getName()," doesn't have id property"));if(this.getModel().hasUniqueIdProperty())this.setValue(this.getModel().getUniqueIdProperty().getName(),e,t);else{var n,a=this.getModel().decodeId(e),r=0,i=Object(X.a)(this.getModel().getIdProperties());try{for(i.s();!(n=i.n()).done;){var o=n.value;this.setValue(o.getName(),a[r],t),r++}}catch(c){i.e(c)}finally{i.f()}}}},{key:"setValue",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{var r=this.getModel().getProperty(e,!0);r.validate(t),r.isAggregation()&&(a=!1)}catch(i){throw i instanceof it?new it(i.getValue(),i.getRestriction()):i instanceof st?new st(t,i.getModelArray(),i.getDepth()):i instanceof oe?new oe(t,i.getExpectedType()):i}Object(q.a)(Object(Y.a)(n.prototype),"setValue",this).call(this,e,t,a)}},{key:"initValue",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],a=!(i.length>2&&void 0!==i[2])||i[2],e.next=4,this.getInstanceValue(t,n);case 4:return r=e.sent,this.setValue(t,r,a),e.abrupt("return",this.getValue(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInstanceValue",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],e.next=3,this.getModel().getProperty(t,!0).getModel();case 3:if((a=e.sent)instanceof _e){e.next=6;break}throw new M("property 'name' has a simple model and can't have instance value");case 6:return e.abrupt("return",a.getObjectInstance(n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getId",value:function(){if(this.getModel().hasUniqueIdProperty())return this.getValue(this.getModel().getUniqueIdProperty().getName());var e,t=[],n=Object(X.a)(this.getModel().getIdProperties());try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(this.getValue(a.getName()))}}catch(r){n.e(r)}finally{n.f()}return this._encodeId(t)}},{key:"_encodeId",value:function(e){return e.length>0?null:JSON.stringify(e)}},{key:"hasCompleteId",value:function(){var e,t=Object(X.a)(this.getModel().getIdProperties());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null===this.getValue(n.getName())||""===this.getValue(n.getName()))return!1}}catch(a){t.e(a)}finally{t.f()}return!0}},{key:"hasEmptyId",value:function(){var e,t=Object(X.a)(this.getModel().getIdProperties());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==this.getValue(n.getName()))return!1}}catch(a){t.e(a)}finally{t.f()}return!0}},{key:"isUpdated",value:function(){if(!this.isFlaggedAsUpdated()){var e,t=Object(X.a)(this.getModel().getComplexProperties());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.isUpdatedValue(n.getName()))return!0}}catch(o){t.e(o)}finally{t.f()}var a,r=Object(X.a)(this.getModel().getDateTimeProperties());try{for(r.s();!(a=r.n()).done;){var i=a.value;if(this.isUpdatedValue(i.getName()))return!0}}catch(o){r.e(o)}finally{r.f()}}return this.isFlaggedAsUpdated()}},{key:"isIdUpdated",value:function(){var e,t=Object(X.a)(this.getModel().getIdProperties());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.isUpdatedValue(n.getName()))return!0}}catch(a){t.e(a)}finally{t.f()}return!1}},{key:"isUpdatedValue",value:function(e){if(this.getModel().hasProperty(e)){if(this.getUpdatedValues().has(e))return!0;if(this.hasValue(e)){if(this.getValue(e)instanceof We)return this.getModel().getProperty(e).isForeign()?this.getValue(e).isIdUpdated():this.getValue(e).isUpdated();if(this.getValue(e)instanceof $e)return this.getValue(e).isUpdated()}}return!1}},{key:"resetUpdatedStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){var t={};this._resetUpdatedStatusRecursive(t)}else{this._resetUpdatedStatus();var n,a=Object(X.a)(this.getModel().getDateTimeProperties());try{for(a.s();!(n=a.n()).done;){var r=n.value,i=r.getName();this.hasValue(i)&&this.getValue(i)instanceof $e&&this.getValue(i).resetUpdatedStatus(!1)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_resetUpdatedStatusRecursive",value:function(e){if(this.getOid()in e){if(e[this.getOid()]>0)return void console.log("Warning loop detected")}else e[this.getOid()]=0;e[this.getOid()]++,this._resetUpdatedStatus();var t,n=Object(X.a)(this.getModel().getComplexProperties());try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.getName();a.isForeign()?this.issetValue(r)&&this.getValue(r)instanceof ut&&this.getValue(r).resetUpdatedStatus(!1):this.hasValue(r)&&this.getValue(r)instanceof We&&this.getValue(r)._resetUpdatedStatusRecursive(e)}}catch(s){n.e(s)}finally{n.f()}var i,o=Object(X.a)(this.getModel().getDateTimeProperties());try{for(o.s();!(i=o.n()).done;){var c=i.value.getName();this.hasValue(c)&&this.getValue(c)instanceof $e&&this.getValue(c).resetUpdatedStatus(!1)}}catch(s){o.e(s)}finally{o.f()}e[this.getOid()]--}},{key:"isCasted",value:function(){return Object(j.a)(this,pt)[pt]}},{key:"validate",value:function(){var e,t,n,a=Object(X.a)(this.getModel().getRequiredProperties());try{for(a.s();!(e=a.n()).done;){var r=e.value;if(!this.hasValue(r.getName()))throw new vt(this,r.getName())}}catch(j){a.e(j)}finally{a.f()}var i,o=Object(X.a)(this.getModel().getConflicts());try{for(o.s();!(i=o.n()).done;){var c=Object(F.a)(i.value,2);if(t=c[0],n=c[1],this.hasValue(t)){var s,u=Object(X.a)(n);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(this.hasValue(l))throw new Ot(this.getModel(),[t,l])}}catch(j){u.e(j)}finally{u.f()}}}}catch(j){o.e(j)}finally{o.f()}var h,f=Object(X.a)(this.getModel().getDependsProperties());try{for(f.s();!(h=f.n()).done;){var d=h.value;if(this.hasValue(d.getName())){var b,v=Object(X.a)(d.getDependencies());try{for(v.s();!(b=v.n()).done;){var O=b.value;if(!this.hasValue(O))throw new jt(d.getName(),O)}}catch(j){v.e(j)}finally{v.f()}}}}catch(j){f.e(j)}finally{f.f()}}},{key:"isValid",value:function(){try{this.validate()}catch(e){return!1}return!0}},{key:"isA",value:function(e){if(!(e instanceof Sa))throw new re(e,["string","Model"],1);return this.getModel()===e||this.getModel().isInheritedFrom(e)}},{key:"cast",value:function(e){if(this.getModel()!==e){if(!e.isInheritedFrom(this.getModel()))throw new gt(e,this.getModel());var t,n=!1;if(this.hasCompleteId()&&this.getModel().hasIdProperties()){var a=Te.getObject(this.getId(),e);if((null===a||a===this)&&(n=!0,Te.hasObject(this.getId(),e,!1)))throw new M("Cannot cast object to '".concat(e.getName(),"'. ComhonObject with id '").concat(this.getId(),"' and model '").concat(e.getName(),"' already exists in MainObjectCollection"))}try{if(this.getModel().isMain()&&n&&Te.removeObject(this),t=this.getModel(),this._updateModel(e),this.isLoaded()&&this.getModel().isAbstract())throw new Fe(this);this.getModel().isMain()&&n&&Te.addObject(this)}catch(r){throw this._updateModel(t),r}Object(j.a)(this,pt)[pt]=!0}}},{key:"getComhonClass",value:function(){return"ComhonObject(".concat(this.getModel().getName(),")")}},{key:"_hasToUpdateMainObjectCollection",value:function(e){return this.getModel().isMain()&&this.getModel().hasIdProperty(e)}},{key:"load",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t,n,a,r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.length>0&&void 0!==o[0]?o[0]:null,t=o.length>1&&void 0!==o[1]&&o[1],n=!1,this.isLoaded()&&!t){e.next=17;break}return r=bt.getApiModelName(this.getModel().getName()),r=null!==(a=r)&&void 0!==a?a:this.getModel().getName(),e.next=8,x.get(r+"/"+this.getId());case 8:if(200!==(i=e.sent).status){e.next=15;break}return e.next=12,this.fill(JSON.parse(i.responseText),new Ue);case 12:n=!0,e.next=17;break;case 15:if(404===i.status){e.next=17;break}throw new lt(i);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(e){}},{key:"delete",value:function(){}},{key:"loadValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.getModel().getProperty(e,!0);return a.loadValue(this.getValue(e),t,n)}}]),n}(We),mt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.ID)}return Object(l.a)(n,null,[{key:"ID",get:function(){return"integer"}}]),Object(l.a)(n,[{key:"_importScalarValue",value:function(e,t){return this.castValue(e)}},{key:"castValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Number.isInteger(e))return e;if(isNaN(e))throw new Me(e,"integer",t);var n=parseFloat(e);if(!Number.isInteger(n))throw new Me(e,"integer",t);return n}},{key:"verifValue",value:function(e){if(!Number.isInteger(e))throw new oe(e,"integer");return!0}}]),n}(Pe),wt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.ID)}return Object(l.a)(n,null,[{key:"ID",get:function(){return"float"}}]),Object(l.a)(n,[{key:"_importScalarValue",value:function(e,t){return this.castValue(e)}},{key:"castValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("number"===typeof e)return e;if(isNaN(e))throw new Me(e,"float",t);return parseFloat(e)}},{key:"verifValue",value:function(e){if("number"!==typeof e)throw new oe(e,"double");return!0}}]),n}(Pe),kt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.ID)}return Object(l.a)(n,null,[{key:"ID",get:function(){return"boolean"}}]),Object(l.a)(n,[{key:"exportSimple",value:function(e,t){return null===e?e:t instanceof ke?e?"1":"0":e}},{key:"_importScalarValue",value:function(e,t){return this.castValue(e)}},{key:"castValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("boolean"===typeof e)return e;if("1"===e)return!0;if("0"===e)return!1;throw new Me(e,["0","1"],t)}},{key:"verifValue",value:function(e){if("boolean"!==typeof e)throw new oe(e,"boolean");return!0}}]),n}(Pe),Et=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.ID)}return Object(l.a)(n,null,[{key:"ID",get:function(){return"string"}}]),Object(l.a)(n,[{key:"verifValue",value:function(e){if("string"!==typeof e)throw new oe(e,"string");return!0}}]),n}(Pe),It=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.ID)}return Object(l.a)(n,null,[{key:"ID",get:function(){return"percentage"}}]),n}(wt),Nt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.ID)}return Object(l.a)(n,null,[{key:"ID",get:function(){return"index"}}]),Object(l.a)(n,[{key:"verifValue",value:function(e){if(Object(q.a)(Object(Y.a)(n.prototype),"verifValue",this).call(this,e),e<0)throw new oe(e,"positive integer (including 0)");return!0}}]),n}(mt),_t=(Je={},Object(S.a)(Je,mt.ID,new mt),Object(S.a)(Je,wt.ID,new wt),Object(S.a)(Je,kt.ID,new kt),Object(S.a)(Je,Et.ID,new Et),Object(S.a)(Je,Nt.ID,new Nt),Object(S.a)(Je,It.ID,new It),Object(S.a)(Je,et.ID,new et),Je);Object.freeze(_t);var Mt=_t,At=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"satisfy",value:function(e){return null!==e}},{key:"isEqual",value:function(e){return this===e||e instanceof n}},{key:"isAllowedModel",value:function(e){return!0}},{key:"toMessage",value:function(e){return this.satisfy(e)?"not null value given":"null value given, value must be not null"}},{key:"toString",value:function(){return"Not null"}}]),n}(tt),Pt=Object(g.a)("model"),xt=Object(g.a)("name"),Ct=Object(g.a)("isId"),Vt=Object(g.a)("isPrivate"),Tt=Object(g.a)("isRequired"),St=Object(g.a)("isNotNull"),Lt=Object(g.a)("isIsolated"),Rt=Object(g.a)("default"),Dt=Object(g.a)("interfaceAsNodeXml"),Ut=Object(g.a)("restrictions"),Ft=Object(g.a)("dependencies"),Xt=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],f=arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(Object(u.a)(this,e),Object.defineProperty(this,Pt,{writable:!0,value:void 0}),Object.defineProperty(this,xt,{writable:!0,value:void 0}),Object.defineProperty(this,Ct,{writable:!0,value:void 0}),Object.defineProperty(this,Vt,{writable:!0,value:void 0}),Object.defineProperty(this,Tt,{writable:!0,value:void 0}),Object.defineProperty(this,St,{writable:!0,value:void 0}),Object.defineProperty(this,Lt,{writable:!0,value:void 0}),Object.defineProperty(this,Rt,{writable:!0,value:void 0}),Object.defineProperty(this,Dt,{writable:!0,value:void 0}),Object.defineProperty(this,Ut,{writable:!0,value:[]}),Object.defineProperty(this,Ft,{writable:!0,value:void 0}),Object(j.a)(this,Pt)[Pt]=t,Object(j.a)(this,xt)[xt]=n,Object(j.a)(this,Ct)[Ct]=a,Object(j.a)(this,Vt)[Vt]=r,Object(j.a)(this,Tt)[Tt]=i,Object(j.a)(this,St)[St]=o,Object(j.a)(this,Lt)[Lt]=f,Object(j.a)(this,Rt)[Rt]=c,Object(j.a)(this,Ft)[Ft]=h,Object(j.a)(this,Lt)[Lt]&&"Model"!==t.getClassName())throw new M('only property with model instance of "Model" may be isolated');var d,b=Object(X.a)(l);try{for(b.s();!(d=b.n()).done;){var v=d.value;if(!v.isAllowedModel(Object(j.a)(this,Pt)[Pt]))throw new M("restriction doesn't allow specified model"+Object(j.a)(this,Pt)[Pt].getClassName());Object(j.a)(this,Ut)[Ut].push(v)}}catch(O){b.e(O)}finally{b.f()}if(Object(j.a)(this,Pt)[Pt]instanceof Pe?Object(j.a)(this,Dt)[Dt]=null!==s&&s:(null===s||s||console.log("warning! 8th parameter is ignored, property with complex model is inevitably interfaced as node xml"),Object(j.a)(this,Dt)[Dt]=!0),Object(j.a)(this,Ct)[Ct]&&!(Object(j.a)(this,Pt)[Pt]instanceof Pe))throw new M("property is defined as id, so argument 1 must be an instance of SimpleModel");Object.freeze(Object(j.a)(this,Ut)[Ut]),Object.freeze(Object(j.a)(this,Ft)[Ft])}return Object(l.a)(e,[{key:"getModel",value:function(){var e=Object(w.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)(this,Pt)[Pt].load();case 2:return e.abrupt("return",Object(j.a)(this,Pt)[Pt]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUniqueModel",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=Object(j.a)(this,Pt)[Pt])instanceof Ce)){e.next=5;break}return e.next=4,t.getUniqueModel();case 4:t=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLoadedModel",value:function(){if(!Object(j.a)(this,Pt)[Pt].isLoaded())throw new M("model not loaded");return Object(j.a)(this,Pt)[Pt]}},{key:"isUniqueModelSimple",value:function(){return Object(j.a)(this,Pt)[Pt]instanceof Ce?Object(j.a)(this,Pt)[Pt].isUniqueModelSimple():Object(j.a)(this,Pt)[Pt]instanceof Pe}},{key:"getName",value:function(){return Object(j.a)(this,xt)[xt]}},{key:"isId",value:function(){return Object(j.a)(this,Ct)[Ct]}},{key:"isPrivate",value:function(){return Object(j.a)(this,Vt)[Vt]}},{key:"isRequired",value:function(){return Object(j.a)(this,Tt)[Tt]}},{key:"isNotNull",value:function(){return Object(j.a)(this,St)[St]}},{key:"isIsolated",value:function(){return Object(j.a)(this,Lt)[Lt]}},{key:"hasDefaultValue",value:function(){return null!==Object(j.a)(this,Rt)[Rt]}},{key:"getDefaultValue",value:function(){return Object(j.a)(this,Pt)[Pt]instanceof et?new $e(Object(j.a)(this,Rt)[Rt]):Object(j.a)(this,Rt)[Rt]}},{key:"isAggregation",value:function(){return!1}},{key:"isForeign",value:function(){return!1}},{key:"isComplex",value:function(){return Object(j.a)(this,Pt)[Pt].isComplex()}},{key:"hasModelDateTime",value:function(){return Object(j.a)(this,Pt)[Pt]instanceof et}},{key:"getRestrictions",value:function(){return Object(j.a)(this,Ut)[Ut]}},{key:"hasDependencies",value:function(){return Object(j.a)(this,Ft)[Ft].length>0}},{key:"getDependencies",value:function(){return Object(j.a)(this,Ft)[Ft]}},{key:"isInterfaceable",value:function(e){return e||!Object(j.a)(this,Vt)[Vt]}},{key:"validate",value:function(e){if(null===e){if(Object(j.a)(this,St)[St])throw new it(e,new At)}else if(Object(j.a)(this,Pt)[Pt].verifValue(e),Object(j.a)(this,Ut)[Ut].length>0){var t=tt.getFirstNotSatisifed(Object(j.a)(this,Ut)[Ut],e);if(null!==t)throw new it(e,t)}}},{key:"isValid",value:function(e){if(null===e)return!Object(j.a)(this,St)[St];try{Object(j.a)(this,Pt)[Pt].verifValue(e)}catch(t){return!1}return null===tt.getFirstNotSatisifed(Object(j.a)(this,Ut)[Ut],e)}},{key:"isInterfacedAsNodeXml",value:function(){return Object(j.a)(this,Dt)[Dt]}},{key:"getAggregationProperties",value:function(){return null}},{key:"loadValue",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.length>1&&void 0!==n[1]?n[1]:[],n.length>2&&void 0!==n[2]&&n[2],new M("cannot load object, property is not foreign property");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLiteralModel",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getModel();case 2:return t=e.sent,e.abrupt("return",t instanceof Pe?t:null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isEqual",value:function(e){var t=this;return this===e||this.constructor.name===e.constructor.name&&Object(j.a)(this,xt)[xt]===e.getName()&&Object(j.a)(this,Ct)[Ct]===e.isId()&&Object(j.a)(this,Vt)[Vt]===e.isPrivate()&&Object(j.a)(this,Tt)[Tt]===e.isRequired()&&Object(j.a)(this,Rt)[Rt]===e.getDefaultValue()&&Object(j.a)(this,St)[St]===e.isNotNull()&&Object(j.a)(this,Lt)[Lt]===e.isIsolated()&&Object(j.a)(this,Ft)[Ft].length===e.getDependencies().length&&e.getDependencies().every((function(e){return-1!==Object(j.a)(t,Ft)[Ft].indexOf(e)}))&&Object(j.a)(this,Pt)[Pt].isEqual(Object(j.a)(e,Pt)[Pt])&&tt.compare(Object(j.a)(this,Ut)[Ut],e.getRestrictions())}}]),e}(),qt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return Object(u.a)(this,n),t.call(this,e,a,!1,r,i,o,null,null,[],c)}return Object(l.a)(n,[{key:"loadValue",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:null,n=a.length>2&&void 0!==a[2]&&a[2],e.next=4,this.getModel();case 4:if(e.sent.verifValue(t),!t.isLoaded()||n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isForeign",value:function(){return!0}},{key:"getLiteralModel",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Model"===this._getModel()._getModel().getClassName()){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this._getModel().getModel();case 4:return t=e.sent,e.abrupt("return",t.hasUniqueIdProperty()?t.getUniqueIdProperty().getLoadedModel():Mt.string);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Xt),Yt=Object(g.a)("aggregationProperties"),Gt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a,r){var i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(Object(u.a)(this,n),i=t.call(this,e,a,o,!1,!0,c),Object.defineProperty(Object(h.a)(i),Yt,{writable:!0,value:null}),!Array.isArray(r))throw new M("aggregationProperties must be an array");if(0===r.length)throw new M("aggregation must have at least one aggregation property");return Object(j.a)(Object(h.a)(i),Yt)[Yt]=r,Object.freeze(Object(j.a)(Object(h.a)(i),Yt)[Yt]),i}return Object(l.a)(n,[{key:"isAggregation",value:function(){return!0}},{key:"getAggregationProperties",value:function(){return Object(j.a)(this,Yt)[Yt]}},{key:"loadValue",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.length>1&&void 0!==n[1]?n[1]:null,n.length>2&&void 0!==n[2]&&n[2],new M("cannot load aggregation value");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isEqual",value:function(e){var t=this;return this===e||Object(q.a)(Object(Y.a)(n.prototype),"isEqual",this).call(this,e)&&Object(j.a)(this,Yt)[Yt].length===e.getAggregationProperties().length&&e.getAggregationProperties().every((function(e){return-1!==Object(j.a)(t,Yt)[Yt].indexOf(e)}))}},{key:"isInterfaceable",value:function(e){return!1}}]),n}(qt),zt=Object(g.a)("auto"),Bt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(Object(u.a)(this,n),r=t.call(this,e,a,i,o,c,!0,null,s,[],l),Object.defineProperty(Object(h.a)(r),zt,{writable:!0,value:void 0}),!(e instanceof Nt)||f!==n.INCREMENTAL)throw new M("auto value 'auto' not allowed on property model '".concat(e.getName(),"'"));return Object(j.a)(Object(h.a)(r),zt)[zt]=f,r}return Object(l.a)(n,null,[{key:"INCREMENTAL",get:function(){return"incremental"}}]),Object(l.a)(n,[{key:"getAutoFunction",value:function(){return Object(j.a)(this,zt)[zt]}}]),n}(Xt),Ht=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e,te.MANIFEST_EXCEPTION)}return n}(M),Kt=Object(g.a)("manifest"),Jt=Object(g.a)("interfacer"),Wt=Object(g.a)("castValues"),Qt=Object(g.a)("namespace"),Zt=Object(g.a)("isLocal"),$t=Object(g.a)("currentProperties"),en=Object(g.a)("propertiesIterator"),tn=Object(g.a)("currentProperty"),nn=function(){function e(t,n,a){if(Object(u.a)(this,e),Object.defineProperty(this,Kt,{writable:!0,value:void 0}),Object.defineProperty(this,Jt,{writable:!0,value:void 0}),Object.defineProperty(this,Wt,{writable:!0,value:void 0}),Object.defineProperty(this,Qt,{writable:!0,value:void 0}),Object.defineProperty(this,Zt,{writable:!0,value:void 0}),Object.defineProperty(this,$t,{writable:!0,value:null}),Object.defineProperty(this,en,{writable:!0,value:void 0}),Object.defineProperty(this,tn,{writable:!0,value:void 0}),this.constructor===e)throw new Error("can't instanciate abstract class ManifestParser");Object(j.a)(this,Kt)[Kt]=t,Object(j.a)(this,Zt)[Zt]=n,Object(j.a)(this,Qt)[Qt]=a,Object(j.a)(this,Jt)[Jt]=e.getInterfacerInstance(this.getManifest()),Object(j.a)(this,Wt)[Wt]=this.getInterfacer()instanceof ke}return Object(l.a)(e,[{key:"isMain",value:function(){throw new Error("function must be overridden in children class")}},{key:"getExtends",value:function(){throw new Error("function must be overridden in children class")}},{key:"getInheritanceRequestable",value:function(){throw new Error("function must be overridden in children class")}},{key:"isAbstract",value:function(){throw new Error("function must be overridden in children class")}},{key:"isSharedParentId",value:function(){throw new Error("function must be overridden in children class")}},{key:"sharedId",value:function(){throw new Error("function must be overridden in children class")}},{key:"getLocalModelManifestParsers",value:function(){throw new Error("function must be overridden in children class")}},{key:"getCurrentPropertyModelUniqueName",value:function(){throw new Error("function must be overridden in children class")}},{key:"_getCurrentProperties",value:function(){throw new Error("function must be overridden in children class")}},{key:"_getBaseInfosProperty",value:function(e,t){throw new Error("function must be overridden in children class")}},{key:"_getDefaultValue",value:function(e){throw new Error("function must be overridden in children class")}},{key:"_getAggregationInfos",value:function(){throw new Error("function must be overridden in children class")}},{key:"_getDependencyProperties",value:function(){throw new Error("function must be overridden in children class")}},{key:"getConflicts",value:function(){throw new Error("function must be overridden in children class")}},{key:"_getRestrictions",value:function(e,t,n){throw new Error("function must be overridden in children class")}},{key:"_isCurrentPropertyForeign",value:function(){throw new Error("function must be overridden in children class")}}],[{key:"_EXTENDS",get:function(){return"extends"}},{key:"IS_MAIN",get:function(){return"is_main"}},{key:"INHERITANCE_REQUESTABLES",get:function(){return"inheritance_requestables"}},{key:"NAME",get:function(){return"name"}},{key:"IS_ID",get:function(){return"is_id"}},{key:"IS_PRIVATE",get:function(){return"is_private"}},{key:"IS_FOREIGN",get:function(){return"is_foreign"}},{key:"IS_REQUIRED",get:function(){return"is_required"}},{key:"IS_ASSOCIATIVE",get:function(){return"is_associative"}},{key:"IS_ABSTRACT",get:function(){return"is_abstract"}},{key:"IS_ISOLATED",get:function(){return"is_isolated"}},{key:"DEPENDS",get:function(){return"depends"}},{key:"CONFLICTS",get:function(){return"conflicts"}},{key:"SHARE_PARENT_ID",get:function(){return"share_parent_id"}},{key:"SHARED_ID",get:function(){return"shared_id"}},{key:"XML_ELEM_TYPE",get:function(){return"xml"}},{key:"XML_NODE",get:function(){return"node"}},{key:"XML_ATTRIBUTE",get:function(){return"attribute"}},{key:"AUTO",get:function(){return"auto"}},{key:"AGGREGATIONS",get:function(){return"aggregations"}},{key:"ENUM",get:function(){return"enum"}},{key:"INTERVAL",get:function(){return"interval"}},{key:"PATTERN",get:function(){return"pattern"}},{key:"REGEX",get:function(){return"regex"}},{key:"NOT_NULL",get:function(){return"not_null"}},{key:"NOT_EMPTY",get:function(){return"not_empty"}},{key:"SIZE",get:function(){return"size"}},{key:"LENGTH",get:function(){return"length"}}]),Object(l.a)(e,[{key:"isLocal",value:function(){return Object(j.a)(this,Zt)[Zt]}},{key:"getManifest",value:function(){return Object(j.a)(this,Kt)[Kt]}},{key:"getNamespace",value:function(){return Object(j.a)(this,Qt)[Qt]}},{key:"getInterfacer",value:function(){return Object(j.a)(this,Jt)[Jt]}},{key:"_initProperties",value:function(){Object(j.a)(this,$t)[$t]=this._getCurrentProperties(),Object(j.a)(this,en)[en]=Object(j.a)(this,$t)[$t].values(),Object(j.a)(this,$t)[$t].length>0&&(Object(j.a)(this,tn)[tn]=Object(j.a)(this,$t)[$t][0],Object(j.a)(this,en)[en].next())}},{key:"nextProperty",value:function(){null===Object(j.a)(this,$t)[$t]&&this._initProperties();var e=Object(j.a)(this,en)[en].next();return Object(j.a)(this,tn)[tn]=e.value,!e.done}},{key:"_getCurrentPropertyNode",value:function(){if(null===Object(j.a)(this,$t)[$t]&&this._initProperties(),!Object(j.a)(this,tn)[tn])throw new M("current property is out of range");return Object(j.a)(this,tn)[tn]}},{key:"getCurrentPropertiesCount",value:function(){return null===Object(j.a)(this,$t)[$t]&&this._initProperties(),Object(j.a)(this,$t)[$t].length}},{key:"_getBooleanValue",value:function(e,t,n){return this.getInterfacer().hasValue(e,t)?Object(j.a)(this,Wt)[Wt]?this.getInterfacer().castValueToBoolean(this.getInterfacer().getValue(e,t)):this.getInterfacer().getValue(e,t):n}},{key:"_getPropertyArrayStringValue",value:function(e,t){return this.getInterfacer().hasValue(e,t,!0)?this._getArrayStringValue(this.getInterfacer().getValue(e,t,!0)):[]}},{key:"_getArrayStringValue",value:function(e){if(!(this.getInterfacer()instanceof ke))return e;for(var t=this.getInterfacer().nodeToArray(e),n=0;n<t.length;n++)t[n]=this.getInterfacer().extractNodeText(t[n]);return t}},{key:"getCurrentProperty",value:function(e,t){var n,a,r,i,o,c,s,u,l,h,f=this._getBaseInfosProperty(e,t),d=Object(F.a)(f,9);a=d[0],r=d[1],i=d[2],o=d[3],c=d[4],s=d[5],u=d[6],l=d[7],h=d[8];var b=this._getDependencyProperties();if(this._isCurrentPropertyForeign()){var v=new Ve(r),O=null;r instanceof Ya&&1===r.getDimensionsCount()&&(O=this._getAggregationInfos()),n=null===O?new qt(v,a,o,s,c,b):new Gt(v,a,O,o,b)}else{var j=this._getDefaultValue(r),g=this._getRestrictions(this._getCurrentPropertyNode(),r,t);n=null===h?new Xt(r,a,i,o,s,c,j,l,g,b,u):new Bt(r,a,i,o,s,l,b,h)}return n}}],[{key:"getInterfacerInstance",value:function(e){if(e instanceof Element)return new ke;if("object"===typeof e&&null!==e)return new Ue;throw new Ht("not recognized manifest format")}}]),e}(),an=Object(g.a)("enumeration"),rn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),a=t.call(this),Object.defineProperty(Object(h.a)(a),an,{writable:!0,value:[]}),Object(j.a)(Object(h.a)(a),an)[an]=e,a}return Object(l.a)(n,[{key:"satisfy",value:function(e){return-1!==Object(j.a)(this,an)[an].indexOf(e)}},{key:"isEqual",value:function(e){if(this===e)return!0;if(!(e instanceof n))return!1;if(Object(j.a)(this,an)[an].length!==Object(j.a)(e,an)[an].length)return!1;for(var t=Object(j.a)(this,an)[an].concat().sort(),a=Object(j.a)(e,an)[an].concat().sort(),r=0;r<t.length;r++)if(t[r]!==a[r])return!1;return!0}},{key:"isAllowedModel",value:function(e){return e instanceof mt||e instanceof Et||e instanceof wt}},{key:"toMessage",value:function(e){if("number"!==typeof e&&"string"!==typeof e){var t="object"===typeof e&&null!==e?e.constructor.name:typeof e;return"Value passed to Enum must be an integer, float or string, instance of ".concat(t," given")}return e+" is"+(this.satisfy(e)?" ":" not ")+"in enumeration "+JSON.stringify(Object(j.a)(this,an)[an])}},{key:"toString",value:function(){return JSON.stringify(Object(j.a)(this,an)[an])}}]),n}(tt),on=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,"interval '".concat(e,"' not valid"),te.MALFORMED_INTERVAL_EXCEPTION)}return n}(M),cn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,"interval cannot be defined on model '".concat(e.getName(),"'"),te.NOT_SUPPORTED_MODEL_INTERVAL_EXCEPTION)}return n}(M),sn=/^([[\]])([^,]*),([^,]*)([[\]])$/,un=/^([[\]])\s*((?:-?\d+(?:\.\d+)?)|(?:\d*))\s*,\s*((?:-?\d+(?:\.\d+)?)|(?:\d*))\s*([[\]])$/,ln=/^([[\]])\s*((?:-?\d+)|(?:\d*))\s*,\s*((?:-?\d+)|(?:\d*))\s*([[\]])$/,hn=Object(g.a)("leftEndPoint"),fn=Object(g.a)("rightEndPoint"),dn=Object(g.a)("isLeftClosed"),bn=Object(g.a)("isRightClosed"),vn=Object(g.a)("model"),On=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r,i;if(Object(u.a)(this,n),r=t.call(this),Object.defineProperty(Object(h.a)(r),hn,{writable:!0,value:null}),Object.defineProperty(Object(h.a)(r),fn,{writable:!0,value:null}),Object.defineProperty(Object(h.a)(r),dn,{writable:!0,value:!0}),Object.defineProperty(Object(h.a)(r),bn,{writable:!0,value:!0}),Object.defineProperty(Object(h.a)(r),vn,{writable:!0,value:void 0}),a instanceof wt){if(null===(i=n.FLOAT_INTERVAL.exec(e)))throw new on(e);i[2]=""===i[2]?null:parseFloat(i[2]),i[3]=""===i[3]?null:parseFloat(i[3])}else if(a instanceof mt){if(null===(i=n.INTEGER_INTERVAL.exec(e)))throw new on(e);i[2]=""===i[2]?null:parseInt(i[2]),i[3]=""===i[3]?null:parseInt(i[3])}else{if(!(a instanceof wt))throw new cn(a);if(null===(i=n.DATETIME_INTERVAL.exec(e)))throw new on(e);i[2]=i[2].trim(),i[3]=i[3].trim(),i[2]=""===i[2]?null:new Date(i[2]),i[3]=""===i[3]?null:new Date(i[3])}if(Object(j.a)(Object(h.a)(r),dn)[dn]="["===i[1],Object(j.a)(Object(h.a)(r),bn)[bn]="]"===i[4],Object(j.a)(Object(h.a)(r),hn)[hn]=i[2],Object(j.a)(Object(h.a)(r),fn)[fn]=i[3],Object(j.a)(Object(h.a)(r),vn)[vn]=a,null!==Object(j.a)(Object(h.a)(r),hn)[hn]&&null!==Object(j.a)(Object(h.a)(r),fn)[fn]&&Object(j.a)(Object(h.a)(r),hn)[hn]>Object(j.a)(Object(h.a)(r),fn)[fn])throw new on(e);return r}return Object(l.a)(n,null,[{key:"DATETIME_INTERVAL",get:function(){return sn}},{key:"FLOAT_INTERVAL",get:function(){return un}},{key:"INTEGER_INTERVAL",get:function(){return ln}}]),Object(l.a)(n,[{key:"_isLeftClosed",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return Object(j.a)(this,dn)[dn]}))},{key:"_getLeftEndPoint",value:function(){return Object(j.a)(this,hn)[hn]}},{key:"_isRightClosed",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return Object(j.a)(this,bn)[bn]}))},{key:"_getRightEndPoint",value:function(){return Object(j.a)(this,fn)[fn]}},{key:"satisfy",value:function(e){if(null===e)return!1;if(null!==Object(j.a)(this,hn)[hn])if(Object(j.a)(this,dn)[dn]){if(e<Object(j.a)(this,hn)[hn])return!1}else if(e<=Object(j.a)(this,hn)[hn])return!1;if(null!==Object(j.a)(this,fn)[fn])if(Object(j.a)(this,bn)[bn]){if(e>Object(j.a)(this,fn)[fn])return!1}else if(e>=Object(j.a)(this,fn)[fn])return!1;return!0}},{key:"isEqual",value:function(e){return this===e||e instanceof n&&Object(j.a)(this,vn)[vn]===Object(j.a)(e,vn)[vn]&&Object(j.a)(this,dn)[dn]===Object(j.a)(e,dn)[dn]&&Object(j.a)(this,bn)[bn]===Object(j.a)(e,bn)[bn]&&Object(j.a)(this,hn)[hn]===Object(j.a)(e,hn)[hn]&&Object(j.a)(this,fn)[fn]===Object(j.a)(e,fn)[fn]}},{key:"isAllowedModel",value:function(e){return e===Object(j.a)(this,vn)[vn]}},{key:"toMessage",value:function(e){if("number"!==typeof e&&!(e instanceof $e)){var t="object"===typeof e&&null!==e?e.constructor.name:typeof e;return"Value passed to Interval must be an integer, float or instance of ComhonDateTime, instance of ".concat(t," given")}return(e instanceof $e?e.toISOString():e)+" is"+(this.satisfy(e)?" ":" not ")+"in interval "+(Object(j.a)(this,dn)[dn]?"[":"]")+(Object(j.a)(this,hn)[hn]instanceof Date?Object(j.a)(this,hn)[hn].toISOString():Object(j.a)(this,hn)[hn])+","+(Object(j.a)(this,fn)[fn]instanceof Date?Object(j.a)(this,fn)[fn].toISOString():Object(j.a)(this,fn)[fn])+(Object(j.a)(this,bn)[bn]?"]":"[")}},{key:"toString",value:function(){return(Object(j.a)(this,dn)[dn]?"[":"]")+(Object(j.a)(this,hn)[hn]instanceof Date?Object(j.a)(this,hn)[hn].toISOString():Object(j.a)(this,hn)[hn])+","+(Object(j.a)(this,fn)[fn]instanceof Date?Object(j.a)(this,fn)[fn].toISOString():Object(j.a)(this,fn)[fn])+(Object(j.a)(this,bn)[bn]?"]":"[")}}]),n}(tt),jn=Object(g.a)("regex"),gn=Object(g.a)("flags"),pn=Object(g.a)("regexObj"),yn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(u.a)(this,n),a=t.call(this),Object.defineProperty(Object(h.a)(a),jn,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(a),gn,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(a),pn,{writable:!0,value:void 0}),e instanceof Promise?e.then((function(e){var t=n.extractPatternAndFlag(e),r=Object(F.a)(t,2);Object(j.a)(Object(h.a)(a),jn)[jn]=r[0],Object(j.a)(Object(h.a)(a),gn)[gn]=r[1],Object(j.a)(Object(h.a)(a),pn)[pn]=new RegExp(Object(j.a)(Object(h.a)(a),jn)[jn],Object(j.a)(Object(h.a)(a),gn)[gn])})).catch((function(e){e instanceof M?console.log(e.getMessage()):console.log("error when trying to retrieve pattern")})):(Object(j.a)(Object(h.a)(a),jn)[jn]=e,Object(j.a)(Object(h.a)(a),gn)[gn]=r,Object(j.a)(Object(h.a)(a),pn)[pn]=new RegExp(Object(j.a)(Object(h.a)(a),jn)[jn],r)),a}return Object(l.a)(n,[{key:"satisfy",value:function(e){return Object(j.a)(this,pn)[pn].test(e)}},{key:"isEqual",value:function(e){return this===e||e instanceof n&&Object(j.a)(this,jn)[jn]===Object(j.a)(e,jn)[jn]&&Object(j.a)(this,gn)[gn]===Object(j.a)(e,gn)[gn]}},{key:"isAllowedModel",value:function(e){return e instanceof Et}},{key:"toMessage",value:function(e){if("string"!==typeof e){var t="object"===typeof e&&null!==e?e.constructor.name:typeof e;return"Value passed to Regex must be a string, instance of ".concat(t," given")}return e+(this.satisfy(e)?" ":" doesn't ")+"satisfy regex "+Object(j.a)(this,jn)[jn]}},{key:"toString",value:function(){return Object(j.a)(this,jn)[jn]}}],[{key:"extractPatternAndFlag",value:function(e){var t=e.lastIndexOf("/");return[e.substr(1,t-1),e.substr(t+1)]}}]),n}(tt),mn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e,Mt.integer)}return Object(l.a)(n,[{key:"satisfy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e instanceof ut&&Object(q.a)(Object(Y.a)(n.prototype),"satisfy",this).call(this,e.count()+t)}},{key:"isEqual",value:function(e){return Object(q.a)(Object(Y.a)(n.prototype),"isEqual",this).call(this,e)&&e instanceof n}},{key:"isAllowedModel",value:function(e){return e instanceof Ya}},{key:"toMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e instanceof ut)){var n="object"===typeof e&&null!==e?e.constructor.name:typeof e;return"Value passed to Size must be an ComhonArray, instance of ".concat(n," given")}return(0!==t?"trying to modify comhon array from size "+e.count()+" to "+(e.count()+t)+". ":"")+"size "+(e.count()+t)+" of given array is"+(this.satisfy(e,t)?" ":" not ")+"in size range "+(this._isLeftClosed()?"[":"]")+this._getLeftEndPoint()+","+this._getRightEndPoint()+(this._isRightClosed()?"]":"[")}}]),n}(On),wn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e,Mt.integer)}return Object(l.a)(n,[{key:"satisfy",value:function(e){return"string"===typeof e&&Object(q.a)(Object(Y.a)(n.prototype),"satisfy",this).call(this,e.length)}},{key:"isEqual",value:function(e){return Object(q.a)(Object(Y.a)(n.prototype),"isEqual",this).call(this,e)&&e instanceof n}},{key:"isAllowedModel",value:function(e){return e instanceof Et}},{key:"toMessage",value:function(e){if("string"!==typeof e){var t="object"===typeof e&&null!==e?e.constructor.name:typeof e;return"Value passed to Length must be a string, instance of ".concat(t," given")}return"length "+e.length+" of given string is"+(this.satisfy(e)?" ":" not ")+"in length range "+(this._isLeftClosed()?"[":"]")+this._getLeftEndPoint()+","+this._getRightEndPoint()+(this._isRightClosed()?"]":"[")}}]),n}(On),kn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"satisfy",value:function(e){return e.length>0}},{key:"isEqual",value:function(e){return this===e||e instanceof n}},{key:"isAllowedModel",value:function(e){return e instanceof Et}},{key:"toMessage",value:function(e){return this.satisfy(e)?"value is not empty":"value is empty, value must be not empty"}},{key:"toString",value:function(){return"Not empty"}}]),n}(tt),En=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"satisfy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e instanceof ut?e.count()+t>0:e.length>0}},{key:"isEqual",value:function(e){return this===e||e instanceof n}},{key:"isAllowedModel",value:function(e){return e instanceof Ya}},{key:"toMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.satisfy(e,t)?"value is not empty":-1===t?"trying to modify comhon array and make it empty, value must be not empty":"value is empty, value must be not empty"}},{key:"toString",value:function(){return"Not empty"}}]),n}(tt),In=Object(g.a)("regexs"),Nn=new(function(){function e(){Object(u.a)(this,e),Object.defineProperty(this,In,{writable:!0,value:new Map})}return Object(l.a)(e,[{key:"getRegex",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(j.a)(this,In)[In].has(t)){e.next=2;break}return e.abrupt("return",Object(j.a)(this,In)[In].get(t));case 2:return n=x.get("pattern/"+t).then((function(e){if(401===e.status)throw new lt(e,"unauthorized to retrieve pattern '".concat(t,"'"));if(200!==e.status)throw new lt(e,"error when trying to retrieve pattern '".concat(t,"'"));return e.responseText})),a=new yn(n),Object(j.a)(this,In)[In].set(t,a),e.prev=5,e.next=8,n;case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(5),Object(j.a)(this,In)[In].delete(t),e.t0;case 14:return e.abrupt("return",Object(j.a)(this,In)[In].get(t));case 15:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRegisteredRegex",value:function(e){return Object(j.a)(this,In)[In].has(e)?Object(j.a)(this,In)[In].get(e):null}},{key:"hasRegisteredRegex",value:function(e){return Object(j.a)(this,In)[In].has(e)}}]),e}()),_n=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getExtends",value:function(){var e=this.getInterfacer().getValue(this.getManifest(),nn._EXTENDS);return null===e?null:[e]}},{key:"getInheritanceRequestable",value:function(){return this._getPropertyArrayStringValue(this.getManifest(),nn.INHERITANCE_REQUESTABLES)}},{key:"isMain",value:function(){return this._getBooleanValue(this.getManifest(),nn.IS_MAIN,!1)}},{key:"isAbstract",value:function(){return!1}},{key:"isSharedParentId",value:function(){return!1}},{key:"sharedId",value:function(){return null}},{key:"getLocalModelManifestParsers",value:function(){var e,t={},n=!this.isLocal()&&this.getInterfacer().hasValue(this.getManifest(),"types",!0)?this.getInterfacer()instanceof ke?this.getInterfacer().nodeToArray(this.getInterfacer().getValue(this.getManifest(),"types",!0)):this.getInterfacer().getValue(this.getManifest(),"types",!0):[],a=Object(X.a)(n);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(!this.getInterfacer().hasValue(r,nn.NAME))throw new Ht("local type name not defined");var i=this.getInterfacer().getValue(r,nn.NAME);if("string"!==typeof i||""===i)throw new Ht("local type name invalid");var o=new this.constructor(r,!0,this.getNamespace());t[this.getNamespace()+"\\"+i]=o}}catch(c){a.e(c)}finally{a.f()}return t}},{key:"_getCurrentProperties",value:function(){return this.getInterfacer().hasValue(this.getManifest(),"properties",!0)?this.getInterfacer()instanceof ke?this.getInterfacer().nodeToArray(this.getInterfacer().getValue(this.getManifest(),"properties",!0)):this.getInterfacer().getValue(this.getManifest(),"properties",!0):[]}},{key:"getCurrentPropertyModelUniqueName",value:function(){return this._getPropertyModelUniqueName(this._getCurrentPropertyNode())}},{key:"_getPropertyModelUniqueName",value:function(e){var t=this.getInterfacer().getValue(e,"type");return"array"===t&&(t=this._getPropertyModelUniqueName(this.getInterfacer().getValue(e,"values",!0))),t}},{key:"_isCurrentPropertyForeign",value:function(){return this._getBooleanValue(this._getCurrentPropertyNode(),nn.IS_FOREIGN,!1)}},{key:"_getBaseInfosProperty",value:function(e,t){var n=this._getCurrentPropertyNode(),a=null,r=this._getBooleanValue(n,nn.IS_ID,!1),i=this._getBooleanValue(n,nn.IS_PRIVATE,!1),o=this._getBooleanValue(n,nn.NOT_NULL,!1),c=this._getBooleanValue(n,nn.IS_REQUIRED,!1),s=this._getBooleanValue(n,nn.IS_ISOLATED,!1),u=this.getInterfacer().getValue(n,nn.NAME),l=this.getInterfacer().getValue(n,nn.AUTO),h=this._completePropertyModel(n,e,t);if(this.getInterfacer().hasValue(n,nn.XML_ELEM_TYPE)){var f=this.getInterfacer().getValue(n,nn.XML_ELEM_TYPE);if(f===nn.XML_ATTRIBUTE)a=!1;else{if(f!==nn.XML_NODE)throw new Ht("invalid value 'type' for property '"+nn.XML_ELEM_TYPE+"'");a=!0}}return[u,h,r,i,o,c,s,a,l]}},{key:"_getAggregationInfos",value:function(){return null}},{key:"_getRestrictions",value:function(e,t,n){if(!(t instanceof Pe))return[];var a=[];if(this._getBooleanValue(e,nn.NOT_EMPTY,!1)&&a.push(new kn),this.getInterfacer().hasValue(e,nn.LENGTH)&&a.push(new wn(this.getInterfacer().getValue(e,nn.LENGTH))),this.getInterfacer().hasValue(e,nn.ENUM,!0)){var r=this.getInterfacer().getValue(e,nn.ENUM,!0);if(this.getInterfacer()instanceof ke)if(r=this.getInterfacer().nodeToArray(r),t instanceof mt)for(var i=0;i<r.length;i++)r[i]=parseInt(this.getInterfacer().extractNodeText(r[i]));else if(t instanceof Et)for(var o=0;o<r.length;o++)r[o]=this.getInterfacer().extractNodeText(r[o]);else{if(!(t instanceof wt))throw new Ht("enum cannot be defined on "+t.getName());for(var c=0;c<r.length;c++)r[c]=parseFloat(this.getInterfacer().extractNodeText(r[c]))}a.push(new rn(r))}if(this.getInterfacer().hasValue(e,nn.INTERVAL)&&a.push(new On(this.getInterfacer().getValue(e,nn.INTERVAL),t)),this.getInterfacer().hasValue(e,nn.PATTERN)){if(this.getInterfacer().hasValue(e,nn.REGEX))throw new Ht(nn.PATTERN+" cannot coexist with "+nn.REGEX);if(!(t instanceof Et))throw new Ht("pattern cannot be defined on "+t.getName());var s=this.getInterfacer().getValue(e,nn.PATTERN);if(!Nn.hasRegisteredRegex(s)){var u=Nn.getRegex(s);n.set(s,u)}a.push(Nn.getRegisteredRegex(s))}else if(this.getInterfacer().hasValue(e,nn.REGEX)){if(!(t instanceof Et))throw new Ht("regex cannot be defined on "+t.getName());var l=yn.extractPatternAndFlag(this.getInterfacer().getValue(e,nn.REGEX)),h=Object(F.a)(l,2),f=h[0],d=h[1];a.push(new yn(f,d))}return a}},{key:"_getDefaultValue",value:function(e){var t=this._getCurrentPropertyNode(),n=null;if(this.getInterfacer().hasValue(t,"default"))if(n=this.getInterfacer().getValue(t,"default"),e instanceof et){if("Invalid Date"===new Date(n).toString())throw new Ht("invalid default value time format : "+n)}else{if(!(e instanceof Pe))throw new Ht("default value can't be applied on complex model");n=e.importValue(n,this.getInterfacer())}return n}},{key:"_getDependencyProperties",value:function(){return this._getPropertyArrayStringValue(this._getCurrentPropertyNode(),nn.DEPENDS)}},{key:"getConflicts",value:function(){var e=[];if(!this.getInterfacer().hasValue(this.getManifest(),nn.CONFLICTS,!0))return e;if(e=this.getInterfacer().getValue(this.getManifest(),nn.CONFLICTS,!0),this.getInterfacer()instanceof ke){e=this.getInterfacer().nodeToArray(e);for(var t=0;t<e.length;t++)e[t]=this._getArrayStringValue(e[t])}return e}},{key:"_completePropertyModel",value:function(e,t,n){var a=t;if(this._isArrayNode(e)||this._isAggregationNode(e)){var r=this.getInterfacer().getValue(e,"values",!0);if(null===r)throw new Ht("arrays and aggregations must have a values node");var i,o,c,s,u,l=this.getInterfacer().getValue(r,"name");if(null===l)throw new Ht("arrays and aggregations must have a values name property");this._isAggregationNode(e)?(i=!1,o=!0,c=!0,s=t,u=[]):(i=this._getBooleanValue(e,nn.IS_ASSOCIATIVE,!1),o=this._getBooleanValue(r,nn.NOT_NULL,!1),c=this._getBooleanValue(r,nn.IS_ISOLATED,!1),u=(s=this._completePropertyModel(r,t,n))instanceof Ya?[]:this._getRestrictions(r,t,n));var h=[];this.getInterfacer().hasValue(e,nn.SIZE)&&h.push(new mn(this.getInterfacer().getValue(e,nn.SIZE))),this._getBooleanValue(e,nn.NOT_EMPTY,!1)&&h.push(new En),a=new Ya(s,i,l,h,u,o,c)}return a}},{key:"_isArrayNode",value:function(e){return"array"===this.getInterfacer().getValue(e,"type")}},{key:"_isAggregationNode",value:function(e){return!1}}]),n}(nn),Mn={"Comhon\\Manifest\\Property\\String":"string","Comhon\\Manifest\\Property\\Integer":"integer","Comhon\\Manifest\\Property\\Index":"index","Comhon\\Manifest\\Property\\Float":"float","Comhon\\Manifest\\Property\\Percentage":"percentage","Comhon\\Manifest\\Property\\Boolean":"boolean","Comhon\\Manifest\\Property\\DateTime":"dateTime"};Object.freeze(Mn);var An={"Comhon\\Manifest\\Value\\String":"string","Comhon\\Manifest\\Value\\Integer":"integer","Comhon\\Manifest\\Value\\Index":"index","Comhon\\Manifest\\Value\\Float":"float","Comhon\\Manifest\\Value\\Percentage":"percentage","Comhon\\Manifest\\Value\\Boolean":"boolean","Comhon\\Manifest\\Value\\DateTime":"dateTime"};Object.freeze(An);var Pn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"isAbstract",value:function(){return this._getBooleanValue(this.getManifest(),nn.IS_ABSTRACT,!1)}},{key:"isSharedParentId",value:function(){return this._getBooleanValue(this.getManifest(),nn.SHARE_PARENT_ID,!1)}},{key:"sharedId",value:function(){return this.getInterfacer().getValue(this.getManifest(),nn.SHARED_ID)}},{key:"getExtends",value:function(){return this.getInterfacer().hasValue(this.getManifest(),nn._EXTENDS,!0)?this._getPropertyArrayStringValue(this.getManifest(),nn._EXTENDS):null}},{key:"getCurrentPropertyModelUniqueName",value:function(){var e,t=this._getCurrentPropertyNode(),a=this.getInterfacer().getValue(t,ye.INHERITANCE_KEY);if(a in n.PROPERTY_TO_SIMPLE_MODEL)e=n.PROPERTY_TO_SIMPLE_MODEL[a];else if("Comhon\\Manifest\\Property\\Object"===a)e=this.getInterfacer().getValue(t,"model");else if("Comhon\\Manifest\\Property\\Array"===a)e=this._getValueModelUniqueName(this.getInterfacer().getValue(t,"values",!0));else{if("Comhon\\Manifest\\Property\\Aggregation"!==a)throw new Ht("invalid "+ye.INHERITANCE_KEY+" value : "+a);var r=this.getInterfacer().getValue(t,"values",!0);e=this.getInterfacer().getValue(r,"model")}return e}},{key:"_getValueModelUniqueName",value:function(e){var t,a=this.getInterfacer().getValue(e,ye.INHERITANCE_KEY);if(a in n.VALUE_TO_SIMPLE_MODEL)t=n.VALUE_TO_SIMPLE_MODEL[a];else if("Comhon\\Manifest\\Value\\Object"===a)t=this.getInterfacer().getValue(e,"model");else{if("Comhon\\Manifest\\Value\\Array"!==a)throw new Ht("invalid "+ye.INHERITANCE_KEY+" array value : "+a);t=this._getValueModelUniqueName(this.getInterfacer().getValue(e,"values",!0))}return t}},{key:"_isArrayNode",value:function(e){var t=this.getInterfacer().getValue(e,ye.INHERITANCE_KEY);return"Comhon\\Manifest\\Property\\Array"===t||"Comhon\\Manifest\\Value\\Array"===t}},{key:"_isAggregationNode",value:function(e){return"Comhon\\Manifest\\Property\\Aggregation"===this.getInterfacer().getValue(e,ye.INHERITANCE_KEY)}},{key:"_getAggregationInfos",value:function(){var e=null,t=this._getCurrentPropertyNode();if(this._isAggregationNode(t)&&this.getInterfacer().hasValue(t,nn.AGGREGATIONS,!0)&&(e=this._getPropertyArrayStringValue(t,nn.AGGREGATIONS),!Array.isArray(e)||0===e.length))throw new Ht("aggregation must have at least one aggregation property");return e}},{key:"_isCurrentPropertyForeign",value:function(){var e=this._getCurrentPropertyNode();if(this._isAggregationNode(e))return!0;for(;this._isArrayNode(e);)e=this.getInterfacer().getValue(e,"values",!0);return this._getBooleanValue(e,nn.IS_FOREIGN,!1)}}],[{key:"PROPERTY_TO_SIMPLE_MODEL",get:function(){return Mn}},{key:"VALUE_TO_SIMPLE_MODEL",get:function(){return An}}]),n}(_n),xn=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"getInstance",value:function(e,t){var n=nn.getInterfacerInstance(e);if(!n.hasValue(e,"version"))throw new Ht("manifest '".concat(t,"' doesn't have version"));var a=n.getValue(e,"version");switch(a){case"2.0":return new _n(e,!1,t);case"3.0":return new Pn(e,!1,t);default:throw new Ht("version ".concat(a," not recognized for manifest ").concat(t))}}}]),e}(),Cn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,"manifest not found for model ".concat(e),te.NOT_DEFINED_MODEL_EXCEPTION)}return n}(M),Vn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,"model ".concat(e," already used"),te.ALREADY_USED_MODEL_NAME_EXCEPTION)}return n}(M),Tn=Object(g.a)("instance"),Sn=Object(g.a)("instanceModels"),Ln=Object(g.a)("originalModelName"),Rn=Object(g.a)("modelRoot"),Dn=function(){function e(){for(var t in Object(u.a)(this,e),Object.defineProperty(this,Sn,{writable:!0,value:{}}),Object.defineProperty(this,Ln,{writable:!0,value:null}),Object.defineProperty(this,Rn,{writable:!0,value:null}),Mt)Mt.hasOwnProperty(t)&&(Object(j.a)(this,Sn)[Sn][t]=Mt[t]);if(Object(j.a)(this,Rn)[Rn]=Ne.getModelRoot(),null===Object(j.a)(this,Rn)[Rn])throw new Error("Model root model has not been registered");Object(j.a)(this,Sn)[Sn][Object(j.a)(this,Rn)[Rn].getName()]=Object(j.a)(this,Rn)[Rn]}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null===Object(j.a)(e,Tn)[Tn]&&(Object(j.a)(e,Tn)[Tn]=new e),Object(j.a)(e,Tn)[Tn]}},{key:"PROPERTIES",get:function(){return"properties"}},{key:"PARENT_MODELS",get:function(){return"parentModels"}},{key:"IS_MAIN_MODEL",get:function(){return"isMainModel"}},{key:"IS_ABSTRACT",get:function(){return"is_abstract"}},{key:"SHARED_ID_MODEL",get:function(){return"shared_id_model"}},{key:"CONFLICTS",get:function(){return"conflicts"}}]),Object(l.a)(e,[{key:"hasInstanceModel",value:function(e){return e in Object(j.a)(this,Sn)[Sn]}},{key:"hasInstanceModelLoaded",value:function(e){return e in Object(j.a)(this,Sn)[Sn]&&Object(j.a)(this,Sn)[Sn][e].isLoaded()}},{key:"getInstanceModel",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this._getInstanceModel(t)).isLoaded()){e.next=4;break}return e.next=4,n.load();case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getInstanceModel",value:function(e){if("string"!==typeof e)throw new Error("first argument must be a string");if(!(e in Object(j.a)(this,Sn)[Sn])&&(new Sa(e),!(e in Object(j.a)(this,Sn)[Sn])))throw new M("model not added during model instanciation");return Object(j.a)(this,Sn)[Sn][e]}},{key:"addManifestParser",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getManifest(t.getName());case 2:if(n=e.sent,a=nn.getInterfacerInstance(n),r=a.getValue(n,"name"),i=this._getInstanceModel(r),o=xn.getInstance(n,i.getName()),c=o.getLocalModelManifestParsers(),i===t||t.getName()in c){e.next=10;break}throw new Cn(t.getName());case 10:return i.setManifestParser(o),e.abrupt("return",this._instanciateLocalModels(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getManifest",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasInstanceModelLoaded(t)){e.next=2;break}throw new M(t+" model already loaded");case 2:return e.next=4,x.get("manifest/"+t);case 4:if(200===(n=e.sent).status){e.next=7;break}throw new lt(n);case 7:if(null!==(a=JSON.parse(n.responseText))&&"object"===typeof a){e.next=10;break}throw new M("invalid manifest from server response");case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addInstanceModel",value:function(e){if(e.getName()in Object(j.a)(this,Sn)[Sn])throw new Vn(e.getName());Object(j.a)(this,Sn)[Sn][e.getName()]=e}},{key:"getProperties",value:function(){var t=Object(w.a)(m.a.mark((function t(n,a){var r,i,o,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,i=!1,t.prev=2,!(n.getName()in Object(j.a)(this,Sn)[Sn])||!Object(j.a)(this,Sn)[Sn][n.getName()].isLoaded()){t.next=5;break}throw new M("function should not be called, model ".concat(n.getName()," already loaded"));case 5:return null===Object(j.a)(this,Ln)[Ln]&&(Object(j.a)(this,Ln)[Ln]=n.getName(),i=!0),t.next=8,this._getParentModels(n,a);case 8:return c=t.sent,o={},Object(S.a)(o,e.IS_ABSTRACT,a.isAbstract()),t.t0=S.a,t.t1=o,t.t2=e.PROPERTIES,t.next=16,this._buildProperties(c,n,a);case 16:return t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),Object(S.a)(o,e.CONFLICTS,a.getConflicts()),r=o,t.next=22,this._getSharedIdModel(n,a,c);case 22:r[e.SHARED_ID_MODEL]=t.sent,r[e.IS_MAIN_MODEL]=a.isMain(),0===c.length&&c.push(Object(j.a)(this,Rn)[Rn]),r[e.PARENT_MODELS]=c,i&&(Object(j.a)(this,Ln)[Ln]=null),t.next=33;break;case 29:throw t.prev=29,t.t4=t.catch(2),Object(j.a)(this,Ln)[Ln]=null,t.t4;case 33:return t.abrupt("return",r);case 34:case"end":return t.stop()}}),t,this,[[2,29]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_instanciateLocalModels",value:function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var a=e[n],r=this._getInstanceModel(n);if(!r.isLoaded()){if(r.hasManifestParser())throw new Vn(r.getName());r.setManifestParser(a)}t.push(r)}return t}},{key:"_getParentModels",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){var a,r,i,o,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null===(r=n.getExtends())){e.next=27;break}i=Object(X.a)(r),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=19;break}if(!((c=o.value)in Mt)){e.next=10;break}throw new M("".concat(t.getName()," cannot extends from ").concat(c));case 10:if(c="\\"===c[0]?c.substr(1):n.getNamespace()+"\\"+c,!this.hasInstanceModel(c)||!this._getInstanceModel(c).isLoading()){e.next=13;break}throw new M("loop detected in model inheritance : ".concat(t.getName()," and ").concat(Object(j.a)(this,Ln)[Ln]));case 13:return e.next=15,this.getInstanceModel(c);case 15:s=e.sent,a.push(s);case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this,[[4,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_buildProperties",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a){var r,i,o,c,s,u,l,h,f,d,b,v,O,j,g,p,y;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},i=[],o=new Map,c=Object(X.a)(t),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=29;break}u=s.value,l=Object(X.a)(u.getProperties()),e.prev=9,l.s();case 11:if((h=l.n()).done){e.next=19;break}if(f=h.value,!((d=f.getName())in r)||r[d].isEqual(f)){e.next=16;break}throw new M('Multiple inheritance conflict on property "'.concat(d,'" ')+'on model "'.concat(n.getName(),'"'));case 16:r[d]=f;case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:e.next=6;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(4),c.e(e.t1);case 34:return e.prev=34,c.f(),e.finish(34);case 37:if(!(a.getCurrentPropertiesCount()>0)){e.next=47;break}case 38:if((b=a.getCurrentPropertyModelUniqueName())in Mt||(b="\\"!==b[0]?a.getNamespace()+"\\"+b:b.substr(1)),v=this._getInstanceModel(b),!((O=a.getCurrentProperty(v,o)).getName()in r)||r[O.getName()].isEqual(O)){e.next=44;break}throw new M('Inheritance conflict on property "'.concat(O.getName(),'" ')+'on model "'.concat(n.getName(),'"'));case 44:r[O.getName()]=O,O.hasDefaultValue()&&i.push(O);case 46:if(a.nextProperty()){e.next=38;break}case 47:if(!(o.size>0)){e.next=50;break}return e.next=50,Promise.all(o.values());case 50:j=0,g=i;case 51:if(!(j<g.length)){e.next=59;break}if(p=g[j],null===(y=tt.getFirstNotSatisifed(p.getRestrictions(),p.getDefaultValue()))){e.next=56;break}throw new it(p.getDefaultValue(),y);case 56:j++,e.next=51;break;case 59:return e.abrupt("return",r);case 60:case"end":return e.stop()}}),e,this,[[4,31,34,37],[9,21,24,27]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"_getSharedIdModel",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){var a,r,i,o,c,s,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>2&&void 0!==u[2]?u[2]:null,r=null!==a&&a[0]?a[0]:null,i=n.sharedId(),o=n.isSharedParentId(),c=null,null!==r){e.next=10;break}if(!o){e.next=8;break}throw new M("Invalid manifest that define model '".concat(t.getName(),"' : '")+nn.SHARE_PARENT_ID+"' is set to true but there is no defined extends.");case 8:if(null===i){e.next=10;break}throw new M("Invalid manifest that define model '".concat(t.getName(),"' : '")+nn.SHARED_ID+"' is set but there is no defined extends.");case 10:if(!o||null===i){e.next=12;break}throw new M("Conflict in manifest that define model '".concat(t.getName(),"' : '")+nn.SHARED_ID+"' and "+nn.SHARE_PARENT_ID+" cannot be defined together.");case 12:if(null!==r&&o&&(c=B.getModelKey(r)),null===i){e.next=21;break}return s="\\"===i[0]?i.substr(1):n.getNamespace()+"\\"+i,e.next=17,this.getInstanceModel(s);case 17:if(c=e.sent,null!==r&&(r===c||r.isInheritedFrom(c))){e.next=20;break}throw new M("Invalid shared id type in manifest that define '".concat(t.getName(),"'. shared id type must be a parent model."));case 20:c=B.getModelKey(c);case 21:return e.abrupt("return",c);case 22:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();Object.defineProperty(Dn,Tn,{writable:!0,value:null});var Un=Dn,Fn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(u.a)(this,n);var a=null===e?"Bad parameters definition : must be an array or null":"Missing parameter : '".concat(e,"' must be specified");return t.call(this,a)}return n}(M),Xn=Object(g.a)("originalException"),qn=Object(g.a)("stackProperties"),Yn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;if(Object(u.a)(this,n),!(e instanceof M))throw new Error("given exception is not instance of ComhonException");var i="Something goes wrong on '."+a.join(".")+"' object : \n"+e.getMessage();return r=t.call(this,i,e.getCode()),Object.defineProperty(Object(h.a)(r),Xn,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(r),qn,{writable:!0,value:[]}),Object(j.a)(Object(h.a)(r),Xn)[Xn]=e,Object(j.a)(Object(h.a)(r),qn)[qn]=a,r}return Object(l.a)(n,[{key:"getOriginalException",value:function(){return Object(j.a)(this,Xn)[Xn]}},{key:"getStackProperties",value:function(){return Object(j.a)(this,qn)[qn]}},{key:"getStringifiedProperties",value:function(){return"."+Object(j.a)(this,qn)[qn].join(".")}}]),n}(M),Gn=Object(g.a)("oids"),zn=Object(g.a)("propertyNameStack"),Bn=function(){function e(){if(Object(u.a)(this,e),Object.defineProperty(this,Gn,{writable:!0,value:{}}),Object.defineProperty(this,zn,{writable:!0,value:void 0}),this.constructor===e)throw new Error("can't instanciate abstract class Visitor")}return Object(l.a)(e,[{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._verifParameters(t),Object(j.a)(this,Gn)[Gn]={},Object(j.a)(this,zn)[zn]=[],this.mainObject=e,this.params=t;var n=null;try{if(e instanceof ut&&e.getModel().isUniqueModelSimple())throw new M("cannot visit ComhonArray that contain a SimpleModel");this._init(e),this._acceptChildren(e,!1),n=this._finalize(e)}catch(a){throw a instanceof Yn?a:new Yn(a,Object(j.a)(this,zn)[zn])}return n}},{key:"_accept",value:function(e,t,n){var a=e.getValue(t);null!==a&&(Object(j.a)(this,zn)[zn].push(t),this._visit(e,t,Object(j.a)(this,zn)[zn],n)&&(!n||a instanceof ut)&&this._acceptChildren(a,n),this._postVisit(e,t,Object(j.a)(this,zn)[zn],n),Object(j.a)(this,zn)[zn].pop())}},{key:"_acceptChildren",value:function(e,t){if(null!==e)if(e instanceof ut){var n,a=Object(X.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;this._accept(e,r[0],t)}}catch(s){a.e(s)}finally{a.f()}}else if(!(e.getOid()in Object(j.a)(this,Gn)[Gn])){Object(j.a)(this,Gn)[Gn][e.getOid()]=e;var i,o=Object(X.a)(e.getModel().getProperties());try{for(o.s();!(i=o.n()).done;){var c=i.value;c.isUniqueModelSimple()||this._accept(e,c.getName(),c.isForeign())}}catch(s){o.e(s)}finally{o.f()}delete Object(j.a)(this,Gn)[Gn][e.getOid()]}}},{key:"_verifParameters",value:function(e){var t=this._getMandatoryParameters();if(Array.isArray(t)){if(t.length>0){if(null===e||"object"!==typeof e)throw new Fn(t.join(", "));var n,a=Object(X.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(!(r in e))throw new Fn(r)}}catch(i){a.e(i)}finally{a.f()}}}else if(null!==t)throw new Fn(null)}},{key:"_getMandatoryParameters",value:function(){throw new Error("function must be overridden in children class")}},{key:"_init",value:function(e){throw new Error("function must be overridden in children class")}},{key:"_visit",value:function(e,t,n,a){throw new Error("function must be overridden in children class")}},{key:"_postVisit",value:function(e,t,n,a){throw new Error("function must be overridden in children class")}},{key:"_finalize",value:function(e){throw new Error("function must be overridden in children class")}}]),e}(),Hn=Object(g.a)("id"),Kn=Object(g.a)("model"),Jn=Object(g.a)("searchForeign"),Wn=Object(g.a)("found"),Qn=Object(g.a)("stack"),Zn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Object.defineProperty(Object(h.a)(e),Hn,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(e),Kn,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(e),Jn,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(e),Wn,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(e),Qn,{writable:!0,value:null}),e}return Object(l.a)(n,[{key:"_getMandatoryParameters",value:function(){return[n.ID,n.MODEL,n.SEARCH_FOREIGN]}},{key:"_init",value:function(e){Object(j.a)(this,Hn)[Hn]=this.params[n.ID],Object(j.a)(this,Kn)[Kn]=this.params[n.MODEL],Object(j.a)(this,Jn)[Jn]=n.SEARCH_FOREIGN in this.params&&this.params[n.SEARCH_FOREIGN]}},{key:"_visit",value:function(e,t,n,a){var r=e.getValue(t);return r instanceof yt&&r.getId()===Object(j.a)(this,Hn)[Hn]&&r.getModel()===Object(j.a)(this,Kn)[Kn]&&(Object(j.a)(this,Qn)[Qn]=n,Object(j.a)(this,Wn)[Wn]=!0),!Object(j.a)(this,Wn)[Wn]}},{key:"_postVisit",value:function(e,t,n,a){}},{key:"_finalize",value:function(e){return Object(j.a)(this,Qn)[Qn]}}],[{key:"ID",get:function(){return"id"}},{key:"MODEL",get:function(){return"model"}},{key:"SEARCH_FOREIGN",get:function(){return"searchForeign"}}]),n}(Bn),$n=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){Object(u.a)(this,n);var r="model must be a '".concat(e.getName(),"', model '").concat(a.getName(),"' given");return t.call(this,r,te.UNEXPECTED_MODEL_EXCEPTION)}return n}(M),ea=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){Object(u.a)(this,n);var r="Undefined property '".concat(a,"' for model '").concat(e.getName(),"'");return t.call(this,r,te.UNDEFINED_PROPERTY_EXCEPTION)}return n}(M),ta=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){Object(u.a)(this,n);var a="model '".concat(e.getName(),"' doesn't have id property");return t.call(this,a,te.NO_ID_PROPERTY_EXCEPTION)}return n}(M),na=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,"model '".concat(e,"' is abstract. abstract model can't be exported"),te.ABSTRACT_OBJECT_EXPORT_EXCEPTION)}return n}(M),aa=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,"Duplicated id '".concat(e,"'"),te.DUPLICATED_ID_EXCEPTION)}return n}(M),ra=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Cannot interface foreign value with private id in public context",te.CONTEXT_ID_EXCEPTION)}return n}(M),ia=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Object loop detected, object contain itself",te.OBJECT_LOOP_EXCEPTION)}return n}(M),oa=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"missing or not complete id on foreign value",te.MISSING_ID_FOREIGN_VALUE_EXCEPTION)}return n}(M),ca=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,"invalid composite id '".concat(e,"'"),te.INVALID_COMPOSITE_ID_EXCEPTION)}return n}(M),sa=Object(g.a)("modelName"),ua=Object(g.a)("isLoaded"),la=Object(g.a)("isLoading"),ha=Object(g.a)("parents"),fa=Object(g.a)("sharedIdModel"),da=Object(g.a)("isMain"),ba=Object(g.a)("isAbstract"),va=Object(g.a)("isOptionsLoaded"),Oa=Object(g.a)("options"),ja=Object(g.a)("propertyIndexByName"),ga=Object(g.a)("properties"),pa=Object(g.a)("idProperties"),ya=Object(g.a)("aggregations"),ma=Object(g.a)("publicProperties"),wa=Object(g.a)("propertiesWithDefaultValues"),ka=Object(g.a)("complexProperties"),Ea=Object(g.a)("dateTimeProperties"),Ia=Object(g.a)("requiredProperties"),Na=Object(g.a)("dependsProperties"),_a=Object(g.a)("conflicts"),Ma=Object(g.a)("uniqueIdProperty"),Aa=Object(g.a)("hasPrivateIdProperty"),Pa=Object(g.a)("manifestParser"),xa=Object(g.a)("promiseModel"),Ca=Object(g.a)("promiseOptions"),Va=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),a=t.call(this),Object.defineProperty(Object(h.a)(a),sa,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(a),ua,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(a),la,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(a),ha,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),fa,{writable:!0,value:null}),Object.defineProperty(Object(h.a)(a),da,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(a),ba,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(a),va,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(a),Oa,{writable:!0,value:null}),Object.defineProperty(Object(h.a)(a),ja,{writable:!0,value:new Map}),Object.defineProperty(Object(h.a)(a),ga,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),pa,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),ya,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),ma,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),wa,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),ka,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),Ea,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),Ia,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),Na,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(a),_a,{writable:!0,value:new Map}),Object.defineProperty(Object(h.a)(a),Ma,{writable:!0,value:null}),Object.defineProperty(Object(h.a)(a),Aa,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(a),Pa,{writable:!0,value:null}),Object.defineProperty(Object(h.a)(a),xa,{writable:!0,value:null}),Object.defineProperty(Object(h.a)(a),Ca,{writable:!0,value:null}),Object(j.a)(Object(h.a)(a),sa)[sa]=e,a.constructor===n?Un.getInstance().addInstanceModel(Object(h.a)(a)):Object(j.a)(Object(h.a)(a),ua)[ua]=!0,a}return Object(l.a)(n,[{key:"getClassName",value:function(){return"Model"}},{key:"isLoaded",value:function(){return Object(j.a)(this,ua)[ua]}},{key:"load",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t,n,a,r,i=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(j.a)(this,ua)[ua]){e.next=2;break}return e.abrupt("return");case 2:if(!Object(j.a)(this,la)[la]){e.next=6;break}return e.next=5,Object(j.a)(this,xa)[xa];case 5:return e.abrupt("return");case 6:return t=null,e.prev=7,Object(j.a)(this,xa)[xa]=new Promise(function(){var e=Object(w.a)(m.a.mark((function e(n,a){var r,o,c,s,u,l,h,f,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Object(j.a)(i,la)[la]=!0,null!==Object(j.a)(i,Pa)[Pa]){e.next=8;break}return e.next=5,Un.getInstance().addManifestParser(i);case 5:if(t=e.sent,null!==Object(j.a)(i,Pa)[Pa]){e.next=8;break}throw new Cn(i.getName());case 8:return e.next=10,Un.getInstance().getProperties(i,Object(j.a)(i,Pa)[Pa]);case 10:r=e.sent,Object(j.a)(i,da)[da]=r[Un.IS_MAIN_MODEL],Object(j.a)(i,ha)[ha]=r[Un.PARENT_MODELS],Object(j.a)(i,fa)[fa]=r[Un.SHARED_ID_MODEL],i._setProperties(r[Un.PROPERTIES]),Object(j.a)(i,ba)[ba]=r[Un.IS_ABSTRACT],o=Object(X.a)(r[Un.CONFLICTS]);try{for(o.s();!(c=o.n()).done;)for(s=c.value,u=0;u<s.length;u++)for(Object(j.a)(i,_a)[_a].has(s[u])||Object(j.a)(i,_a)[_a].set(s[u],[]),l=0;l<s.length;l++)l!==u&&Object(j.a)(i,_a)[_a].get(s[u]).push(s[l])}catch(b){o.e(b)}finally{o.f()}h=Object(X.a)(Object(j.a)(i,_a)[_a]);try{for(h.s();!(f=h.n()).done;)d=f.value,Object.freeze(d[1])}catch(b){h.e(b)}finally{h.f()}Object.freeze(Object(j.a)(i,_a)[_a]),Object.freeze(Object(j.a)(i,ha)[ha]),Object.freeze(Object(j.a)(i,ja)[ja]),Object.freeze(Object(j.a)(i,ga)[ga]),Object.freeze(Object(j.a)(i,pa)[pa]),Object.freeze(Object(j.a)(i,ya)[ya]),Object.freeze(Object(j.a)(i,ma)[ma]),Object.freeze(Object(j.a)(i,wa)[wa]),Object.freeze(Object(j.a)(i,ka)[ka]),Object.freeze(Object(j.a)(i,Ea)[Ea]),Object.freeze(Object(j.a)(i,Na)[Na]),Object.freeze(Object(j.a)(i,Ia)[Ia]),Object(j.a)(i,ua)[ua]=!0,Object(j.a)(i,la)[la]=!1,Object(j.a)(i,Pa)[Pa]=null,n(),e.next=41;break;case 38:e.prev=38,e.t0=e.catch(0),a(e.t0);case 41:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(t,n){return e.apply(this,arguments)}}()),e.next=11,Object(j.a)(this,xa)[xa];case 11:Object(j.a)(this,xa)[xa]=null,e.next=34;break;case 14:if(e.prev=14,e.t0=e.catch(7),Object(j.a)(this,la)[la]=!1,Object(j.a)(this,ha)[ha]=[],Object(j.a)(this,ja)[ja]=new Map,Object(j.a)(this,ga)[ga]=[],Object(j.a)(this,pa)[pa]=[],Object(j.a)(this,ya)[ya]=[],Object(j.a)(this,ma)[ma]=[],Object(j.a)(this,wa)[wa]=[],Object(j.a)(this,ka)[ka]=[],Object(j.a)(this,Ea)[Ea]=[],Object(j.a)(this,Na)[Na]=[],Object(j.a)(this,_a)[_a]=[],Object(j.a)(this,Ia)[Ia]=[],Object(j.a)(this,Ma)[Ma]=null,Object(j.a)(this,Aa)[Aa]=!1,Object(j.a)(this,Pa)[Pa]=null,null!==t){n=Object(X.a)(t);try{for(n.s();!(a=n.n()).done;)r=a.value,Object(j.a)(r,Pa)[Pa]=null}catch(o){n.e(o)}finally{n.f()}}throw e.t0;case 34:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"setManifestParser",value:function(e){if(null!==Object(j.a)(this,Pa)[Pa])throw new M("error during model '"+Object(j.a)(this,sa)[sa]+"' loading");Object(j.a)(this,Pa)[Pa]=e}},{key:"hasManifestParser",value:function(){return null!==Object(j.a)(this,Pa)[Pa]}},{key:"_setProperties",value:function(e){var t,n=[],a=0;for(var r in e)e.hasOwnProperty(r)&&((t=e[r]).isId()&&(Object(j.a)(this,pa)[pa].push(t),t.isPrivate()||n.push(t)),t.hasDefaultValue()?Object(j.a)(this,wa)[wa].push(t):t.isAggregation()&&Object(j.a)(this,ya)[ya].push(t),t.isPrivate()||Object(j.a)(this,ma)[ma].push(t),t.isComplex()&&Object(j.a)(this,ka)[ka].push(t),t.hasModelDateTime()&&Object(j.a)(this,Ea)[Ea].push(t),t.isRequired()&&Object(j.a)(this,Ia)[Ia].push(t),t.hasDependencies()&&Object(j.a)(this,Na)[Na].push(t),Object(j.a)(this,ja)[ja].set(r,a),Object(j.a)(this,ga)[ga].push(t),a++);1===Object(j.a)(this,pa)[pa].length&&(Object(j.a)(this,Ma)[Ma]=Object(j.a)(this,pa)[pa][0]),Object(j.a)(this,pa)[pa].length!==n.length&&(Object(j.a)(this,Aa)[Aa]=!0)}},{key:"getObjectInstance",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new yt(this,e)}},{key:"isAbstract",value:function(){return Object(j.a)(this,ba)[ba]}},{key:"getSharedIdModel",value:function(){return Object(j.a)(this,fa)[fa]}},{key:"getParents",value:function(){return Object(j.a)(this,ha)[ha]}},{key:"getParent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(j.a)(this,ha)[ha][e]?Object(j.a)(this,ha)[ha][e]:null}},{key:"getFirstSharedIdParentMatch",value:function(){return this.getSharedIdParentMatch(!0)}},{key:"getLastSharedIdParentMatch",value:function(){return this.getSharedIdParentMatch(!1)}},{key:"getSharedIdParentMatch",value:function(e){for(var t=this,n=null,a=B.getModelKey(this);null!==t.getParent()&&(t=t.getParent(),B.getModelKey(t)!==a||(n=t,!e)););return n}},{key:"hasParent",value:function(){return Object(j.a)(this,ha)[ha].length>0}},{key:"isInheritedFrom",value:function(e){if(!this.isLoaded())throw new M("current model is not loaded, cannot verify if current model is inherited from given model");var t,n=!1,a=Object(X.a)(this.getParents());try{for(a.s();!(t=a.n()).done;){var r=t.value;if((n=e===r)||(n=r.isInheritedFrom(e)),n)break}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"getName",value:function(){return Object(j.a)(this,sa)[sa]}},{key:"getNameSpace",value:function(){var e=this.getName(),t=e.lastIndexOf("\\");return-1!==t?e.substr(0,t+1):""}},{key:"getShortName",value:function(){var e=this.getName(),t=e.lastIndexOf("\\");return-1!==t?e.substr(t+1):e}},{key:"isLoading",value:function(){return Object(j.a)(this,la)[la]}},{key:"getProperties",value:function(){return Object(j.a)(this,ga)[ga]}},{key:"_getContextProperties",value:function(e){return e?Object(j.a)(this,ga)[ga]:Object(j.a)(this,ma)[ma]}},{key:"getComplexProperties",value:function(){return Object(j.a)(this,ka)[ka]}},{key:"getDateTimeProperties",value:function(){return Object(j.a)(this,Ea)[Ea]}},{key:"getPublicProperties",value:function(){return Object(j.a)(this,ma)[ma]}},{key:"getPropertiesNames",value:function(){var e,t=[],n=Object(X.a)(Object(j.a)(this,ga)[ga]);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.getName())}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hasProperty(e))return Object(j.a)(this,ga)[ga][Object(j.a)(this,ja)[ja].get(e)];if(t)throw new ea(this,e);return null}},{key:"getIdProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getProperty(e,t);if(null!==n&&n.isId())return n;if(t)throw new ea(this,e);return null}},{key:"hasProperty",value:function(e){return Object(j.a)(this,ja)[ja].has(e)}},{key:"hasIdProperty",value:function(e){return null!==this.getIdProperty(e)}},{key:"getIdProperties",value:function(){return Object(j.a)(this,pa)[pa]}},{key:"getUniqueIdProperty",value:function(){return Object(j.a)(this,Ma)[Ma]}},{key:"hasUniqueIdProperty",value:function(){return null!==Object(j.a)(this,Ma)[Ma]}},{key:"hasPrivateIdProperty",value:function(){return Object(j.a)(this,Aa)[Aa]}},{key:"hasIdProperties",value:function(){return Object(j.a)(this,pa)[pa].length>0}},{key:"getPropertiesWithDefaultValues",value:function(){return Object(j.a)(this,wa)[wa]}},{key:"getAggregationProperties",value:function(){return Object(j.a)(this,ya)[ya]}},{key:"getRequiredProperties",value:function(){return Object(j.a)(this,Ia)[Ia]}},{key:"hasPropertyConflicts",value:function(e){return Object(j.a)(this,_a)[_a].has(e)}},{key:"getPropertyConflicts",value:function(e){return Object(j.a)(this,_a)[_a].has(e)?Object(j.a)(this,_a)[_a].get(e):[]}},{key:"getConflicts",value:function(){return Object(j.a)(this,_a)[_a]}},{key:"getDependsProperties",value:function(){return Object(j.a)(this,Na)[Na]}},{key:"isMain",value:function(){return Object(j.a)(this,da)[da]}},{key:"_loadOptions",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t,n,a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(j.a)(this,va)[va]){e.next=33;break}return n=null!==(t=bt.getApiModelName(Object(j.a)(this,sa)[sa]))&&void 0!==t?t:Object(j.a)(this,sa)[sa],e.prev=2,e.next=5,x.options(n);case 5:if(200===(a=e.sent).status){e.next=8;break}throw new lt(a);case 8:if(""===a.responseText){e.next=18;break}return r=new Ue,e.next=12,Un.getInstance().getInstanceModel("Comhon\\Options");case 12:return i=e.sent,e.next=15,i.import(r.fromString(a.responseText),r);case 15:Object(j.a)(this,Oa)[Oa]=e.sent,e.next=22;break;case 18:return e.next=20,x.options(n+"/1");case 20:o=e.sent,Object(j.a)(this,Oa)[Oa]=this._initOptionsMethods(a.getResponseHeader("Allow"),o.getResponseHeader("Allow"));case 22:Object(j.a)(this,va)[va]=!0,e.next=33;break;case 25:if(e.prev=25,e.t0=e.catch(2),!(e.t0 instanceof A||e.t0 instanceof lt&&404===e.t0.getCode())){e.next=32;break}Object(j.a)(this,Oa)[Oa]=this._initOptionsMethods(null,null),Object(j.a)(this,va)[va]=!0,e.next=33;break;case 32:throw e.t0;case 33:case"end":return e.stop()}}),e,this,[[2,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"_initOptionsMethods",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){var a,r,i,o,c,s,u,l,h,f,d,b,v,O;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null===t?[]:t.replace(/\s/g,"").split(","),r=null===n?[]:n.replace(/\s/g,"").split(","),e.next=4,Un.getInstance().getInstanceModel("Comhon\\Options");case 4:return i=e.sent,(o=i.getObjectInstance(!0)).setValue("name",Object(j.a)(this,sa)[sa]),e.next=9,o.initValue("collection");case 9:return c=e.sent,e.next=12,c.initValue("allowed_methods");case 12:s=e.sent,u=Object(X.a)(a);try{for(u.s();!(l=u.n()).done;)h=l.value,s.pushValue(h)}catch(g){u.e(g)}finally{u.f()}return e.next=17,o.initValue("unique");case 17:return f=e.sent,e.next=20,f.initValue("allowed_methods");case 20:d=e.sent,b=Object(X.a)(r);try{for(b.s();!(v=b.n()).done;)O=v.value,d.pushValue(O)}catch(g){b.e(g)}finally{b.f()}return e.abrupt("return",o);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOptions",value:function(){var e=Object(w.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(j.a)(this,va)[va]){e.next=5;break}return null===Object(j.a)(this,Ca)[Ca]&&(Object(j.a)(this,Ca)[Ca]=this._loadOptions()),e.next=4,Object(j.a)(this,Ca)[Ca];case 4:Object(j.a)(this,Ca)[Ca]=null;case 5:return e.abrupt("return",Object(j.a)(this,Oa)[Oa]);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decodeId",value:function(e){var t=JSON.parse(e);if(!Array.isArray(t)||this.getIdProperties().length!==t.length)throw new ca(e);return t}},{key:"isCompleteId",value:function(e){if(this.hasUniqueIdProperty())return!0;for(var t=this.decodeId(e),n=0;n<t.length;n++)if(null===t[n]||""===t[n])return!1;return!0}},{key:"_isNextLevelFirstLevel",value:function(e){return!1}},{key:"loadObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i,o,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,a=c.length>2&&void 0!==c[2]&&c[2],null!==t){e.next=4;break}return e.abrupt("return",null);case 4:if(this.hasIdProperties()){e.next=6;break}throw new ta(this);case 6:if(null!==(r=Te.getObject(t,this))){e.next=12;break}r=this._buildObjectFromId(t,!1,!1),i=!0,e.next=17;break;case 12:if(!r.isLoaded()||a){e.next=16;break}return e.abrupt("return",r);case 16:i=!1;case 17:return e.prev=17,e.next=20,r.load(n,a);case 20:return!(o=e.sent)&&i&&r.reset(),e.abrupt("return",o?r:null);case 25:throw e.prev=25,e.t0=e.catch(17),i&&r.reset(),e.t0;case 29:case"end":return e.stop()}}),e,this,[[17,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_export",value:function(e,t,n,a,r,i,o){var c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(null===e)return null;if(e.getModel().isAbstract())throw new na(e.getModel().getName());a&&!n.mustValidate()||e.validate();var s,u,l,h,f=n.createNode(t),d=n.isPrivateContext(),b=a&&n.hasToExportOnlyUpdatedValues(),v=a?n.getPropertiesFilter():null;if(e.getOid()in o){if(o[e.getOid()]>0)throw new ia}else o[e.getOid()]=0;if(o[e.getOid()]++,e.getModel().hasIdProperties()){if(r.hasNewObject(e.getId(),e.getModel()))throw new aa(e.getId());r.addObject(e,!1)}c&&(s=r,r=new Q);var O,j=Object(X.a)(e);try{for(j.s();!(O=j.n()).done;){var g=Object(F.a)(O.value,2);l=g[0],h=g[1];try{var p=e.getModel().getProperty(l);!p.isInterfaceable(d)||b&&!p.isId()&&!e.isUpdatedValue(l)||null!==v&&-1===v.indexOf(l)||(null===h&&null!==i?(u=n.createNode(l),i.push(u)):u=p.getLoadedModel()._export(h,l,n,!1,r,i,o,p.isIsolated()),n.setValue(f,u,l,p.isInterfacedAsNodeXml()))}catch(y){throw new ae(y,l)}}}catch(m){j.e(m)}finally{j.f()}return e.getModel()!==this&&n.setValue(f,e.getModel().getName(),ye.INHERITANCE_KEY),c&&(n.hasToVerifyReferences()&&this._verifyReferences(e,r),(r=s).addObject(e,!1)),o[e.getOid()]--,f}},{key:"_exportId",value:function(e,t,a,r,i){var o,c=e.getModel();if(!c.hasIdProperties())throw new M("cannot export id, actual model '".concat(c.getName(),"' doesn't have id"));if(!a.isPrivateContext()&&c.hasPrivateIdProperty())throw new ra;if(r.addObject(e,!0),c===this||!c.isMain()&&B.getModelKey(this)===B.getModelKey(c))o=n._toInterfacedId(e);else{if(!c.isInheritedFrom(this))throw new $n(this,c);o=a.createNode(t),a.setValue(o,n._toInterfacedId(e),ye.COMPLEX_ID_KEY),a.setValue(o,c.getName(),ye.INHERITANCE_KEY)}return o}},{key:"_getInheritedModelName",value:function(e,t){return t.getValue(e,ye.INHERITANCE_KEY)}},{key:"_getInheritedModel",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un.getInstance().getInstanceModel(t);case 2:if((n=e.sent)===this||n.isInheritedFrom(this)){e.next=5;break}throw new $n(this,n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdFromInterfacedObject",value:function(e,t,a){var r,i=t.isPrivateContext();if(null!==Object(j.a)(this,Ma)[Ma]){if(!Object(j.a)(this,Ma)[Ma].isInterfaceable(i))return null;r=Object(j.a)(this,Ma)[Ma].getName();var o=t.getValue(e,r,Object(j.a)(this,Ma)[Ma].isInterfacedAsNodeXml());return Object(j.a)(this,Ma)[Ma].getLoadedModel().importValue(o,t)}var c,s=[],u=!1,l=Object(X.a)(this.getIdProperties());try{for(l.s();!(c=l.n()).done;){var h=c.value;if(h.isInterfaceable(i)){r=h.getName(),t.hasValue(e,r,h.isInterfacedAsNodeXml())&&(u=!0);var f=t.getValue(e,r,h.isInterfacedAsNodeXml());s.push(h.getLoadedModel().importValue(f,t))}else s.push(null)}}catch(d){l.e(d)}finally{l.f()}return u?n.encodeId(s):null}},{key:"_getOrCreateObjectInstanceFromInterfacedObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=this._getInheritedModelName(t,n))){e.next=5;break}e.t0=this,e.next=8;break;case 5:return e.next=7,this._getInheritedModel(i);case 7:e.t0=e.sent;case 8:return o=e.t0,c=o.getIdFromInterfacedObject(t,n,a),e.abrupt("return",o._getOrCreateObjectInstance(c,n,a,!1,r));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"_getOrCreateObjectInstance",value:function(e,t,n,a,r){var i;if(null!==e&&this.hasIdProperties()){var o=B.getModelKey(this);if(null!==(i=r.getObject(e,o))&&!a&&r.hasNewObject(e,o))throw new aa(e);if(Object(j.a)(this,da)[da]&&null===i&&(i=Te.getObject(e,this)),null===i)i=this._buildObjectFromId(e,!1,t.hasToFlagValuesAsUpdated()),r.addObject(i,a);else{if(this.isInheritedFrom(i.getModel())&&B.getModelKey(this)===B.getModelKey(i.getModel())&&i.cast(this),n){if(t.getMergeType()===ye.OVERWRITE){var c=i.isLoaded();i.reset(!1),i.setIsLoaded(c)}}else a||i.reset(!1);r.addObject(i,a)}}else i=this.getObjectInstance(!1);return i}},{key:"import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this._importRoot(t,n));case 4:throw e.prev=4,e.t0=e.catch(0),new se(e.t0);case 7:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_importRoot",value:function(){var e=Object(w.a)(m.a.mark((function e(t,a){var r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:null,i=o.length>3&&void 0!==o[3]&&o[3],a.isNodeValue(t)){e.next=8;break}if(!(a instanceof Ue&&Array.isArray(t)&&0===t.length)){e.next=7;break}t={},e.next=8;break;case 7:throw new oe(t,a.getNodeClasses().join(" or "));case 8:return e.abrupt("return",Object(q.a)(Object(Y.a)(n.prototype),"_importRoot",this).call(this,t,a,r,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getRootObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getOrCreateObjectInstanceFromInterfacedObject(t,n,!0,new Q));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_initObjectCollectionInterfacer",value:function(e,t){var n=t===ye.MERGE?new Q(e):new Q;return n.addStartObject(e,!1),n.addObject(e,!1),n}},{key:"_import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i,o,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.length>4&&void 0!==c[4]&&c[4],!n.isNullValue(t)){e.next=3;break}return e.abrupt("return",null);case 3:if(n.isNodeValue(t)){e.next=9;break}if(!(n instanceof Ue&&Array.isArray(t)&&0===t.length)){e.next=8;break}t={},e.next=9;break;case 8:throw new oe(t,n.getNodeClasses().join(" or "));case 9:return e.next=11,this._getOrCreateObjectInstanceFromInterfacedObject(t,n,a,r);case 11:return o=e.sent,i&&((r=a?new Q(o):new Q).addStartObject(o,!1),r.addObject(o,!1)),e.next=15,this._fillObject(o,t,n,a,r);case 15:return i&&n.hasToVerifyReferences()&&this._verifyReferences(o,r),e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"fillObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a){var r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.verifValue(t),e.prev=1,null===(r=this._getInheritedModelName(n,a,!0))){e.next=8;break}return e.next=6,Un.getInstance().getInstanceModel(r);case 6:i=e.sent,t.cast(i);case 8:return(o=t.getModel())._verifIdBeforeFillObject(t,o.getIdFromInterfacedObject(n,a,!0),a.hasToFlagValuesAsUpdated()),e.next=12,o._importRoot(n,a,t);case 12:if(e.sent===t){e.next=15;break}throw new M("invalid object instance");case 15:e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof M)){e.next=23;break}throw new se(e.t0);case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"_verifIdBeforeFillObject",value:function(e,t,n){if(e.getModel()!==this)throw new $n(this,e.getModel());if(this.hasIdProperties()&&(e.hasCompleteId()||this._fillObjectwithId(e,t,n),e.hasCompleteId()&&e.getId()!==t)){var a=null===t?"null":t;throw new M("id must be the same as imported value id : ".concat(e.getId()," !== ").concat(a))}}},{key:"_fillObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r,i){var o,c,s,u,l,h,f,d,b,v,O,j,g,p,y,w=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.length>5&&void 0!==w[5]&&w[5],t instanceof yt){e.next=3;break}throw new re(t,"ComhonObject",1);case 3:if(o=t.getModel(),t.isA(this)){e.next=6;break}throw new $n(this,o);case 6:(s=r&&a.hasToVerifyReferences()&&a.getMergeType()===ye.MERGE)&&0===(c=t.getObjectValues()).size&&(s=!1),u=a.isPrivateContext(),l=a.hasToFlagValuesAsUpdated(),h=o._getContextProperties(u),f=a instanceof ke?a.getNullNodes(n):null,b=Object(X.a)(h),e.prev=13,b.s();case 15:if((v=b.n()).done){e.next=49;break}if(O=v.value,j=void 0,e.prev=18,g=O.getName(),!O.isInterfaceable(u)){e.next=38;break}if(!a.hasValue(n,g,O.isInterfacedAsNodeXml())){e.next=37;break}if(p=a.getValue(n,g,O.isInterfacedAsNodeXml()),!a.isNullValue(p)){e.next=27;break}d=null,e.next=33;break;case 27:return e.next=29,O.getModel();case 29:return y=e.sent,e.next=32,y._import(p,a,y._isNextLevelFirstLevel(r),i,O.isIsolated());case 32:d=e.sent;case 33:t.setValue(g,d,l),s&&c.delete(g),e.next=38;break;case 37:O.isInterfacedAsNodeXml()||null===f||-1===f.indexOf(g)||(t.setValue(g,null,l),s&&c.delete(g));case 38:e.next=47;break;case 40:if(e.prev=40,e.t0=e.catch(18),!(e.t0 instanceof M)){e.next=46;break}throw new se(e.t0,j);case 46:throw e.t0;case 47:e.next=15;break;case 49:e.next=54;break;case 51:e.prev=51,e.t1=e.catch(13),b.e(e.t1);case 54:return e.prev=54,b.f(),e.finish(54);case 57:r?(a.hasToFlagObjectAsLoaded()&&t.setIsLoaded(!0),a.mustValidate()&&t.validate(),s&&this._processUnchangeValues(c,i)):(t.setIsLoaded(!0),t.validate());case 58:case"end":return e.stop()}}),e,this,[[13,51,54,57],[18,40]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}()},{key:"_processUnchangeValues",value:function(e,t){var n,a=Object(X.a)(e);try{for(a.s();!(n=a.n()).done;){var r=Object(F.a)(n.value,2),i=r[0],o=r[1],c=this.getProperty(i).getLoadedModel();if(c instanceof Ve)if(c.getLoadedModel()instanceof Ya){var s,u=Object(X.a)(Ya.getOneDimensionalValues(o,!0));try{for(u.s();!(s=u.n()).done;){var l=s.value;t.addObject(l,!0)}}catch(h){u.e(h)}finally{u.f()}}else t.addObject(o,!0);else B.build(o,!0,!1,t.getNewObjectCollection())}}catch(h){a.e(h)}finally{a.f()}}},{key:"_importId",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isComplexInterfacedId(t)){e.next=10;break}if(n.hasValue(t,ye.COMPLEX_ID_KEY)&&n.hasValue(t,ye.INHERITANCE_KEY)){e.next=3;break}throw new M("object id must have property '"+ye.COMPLEX_ID_KEY+"' and '"+ye.INHERITANCE_KEY+"'");case 3:return i=n.getValue(t,ye.COMPLEX_ID_KEY),c=n.getValue(t,ye.INHERITANCE_KEY),e.next=7,this._getInheritedModel(c);case 7:o=e.sent,e.next=13;break;case 10:i=t,o=this,n instanceof ke&&i instanceof Element&&(i=n.extractNodeText(i));case 13:if(o.hasIdProperties()){e.next=15;break}throw new M("cannot import id, actual model '".concat(o.getName(),"' doesn't have id"));case 15:if(n.isPrivateContext()||!o.hasPrivateIdProperty()){e.next=17;break}throw new ra;case 17:if(null!==i){e.next=19;break}return e.abrupt("return",null);case 19:if(o.hasUniqueIdProperty()&&(a&&n.isStringifiedValues()||n instanceof ke)&&(i=o.getUniqueIdProperty().getLoadedModel().importValue(i,n)),("object"!==typeof i||null===i)&&""!==i){e.next=23;break}throw i="object"===typeof i&&null!==i?JSON.stringify(i):i,new M("malformed id '".concat(i,"' for model '").concat(o.modelName,"'"));case 23:return e.abrupt("return",o._getOrCreateObjectInstance(i,n,!1,!0,r));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"_buildObjectFromId",value:function(e,t,n){return this._fillObjectwithId(this.getObjectInstance(t),e,n)}},{key:"_fillObjectwithId",value:function(e,t,n){if(e.getModel()!==this)throw new $n(this,e.getModel());return null!==t&&e.setId(t,n),e}},{key:"verifValue",value:function(e){if(!(e instanceof yt)||!e.isA(this))throw new oe(e,"ComhonObject(".concat(this.getName(),")"));return!0}}],[{key:"encodeId",value:function(e){return e.length>0?null:JSON.stringify(e)}},{key:"_toInterfacedId",value:function(e){if(!e.hasCompleteId())throw new oa;return e.getId()}}]),n}(_e),Ta=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Comhon\\Root")}return Object(l.a)(n,[{key:"getClassName",value:function(){return"ModelRoot"}}]),n}(Va);Ne.registerModelRoot(new Ta),Ne.registerObjectFinder(Zn);var Sa=Va,La=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(u.a)(this,n),r=null===e?"null":"object"===typeof e?e.constructor.name:typeof e,t.call(this,"value ("+r+") imcompatible with interfacer ("+a.constructor.name+")")}return n}(M),Ra=Object(g.a)("elementName"),Da=Object(g.a)("isAssociative"),Ua=Object(g.a)("isNotNullElement"),Fa=Object(g.a)("isIsolatedElement"),Xa=Object(g.a)("arrayRestrictions"),qa=Object(g.a)("elementRestrictions"),Ya=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,a,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(Object(u.a)(this,n),e instanceof Ve)throw new re(e.getClassName(),["ModelUnique","ModelArray"],1);if(i=t.call(this,e),Object.defineProperty(Object(h.a)(i),Ra,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(i),Da,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(i),Ua,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(i),Fa,{writable:!0,value:void 0}),Object.defineProperty(Object(h.a)(i),Xa,{writable:!0,value:[]}),Object.defineProperty(Object(h.a)(i),qa,{writable:!0,value:[]}),Object(j.a)(Object(h.a)(i),Da)[Da]=a,Object(j.a)(Object(h.a)(i),Ra)[Ra]=r,Object(j.a)(Object(h.a)(i),Ua)[Ua]=s,Object(j.a)(Object(h.a)(i),Fa)[Fa]=l,Object(j.a)(Object(h.a)(i),Xa)[Xa]=o,Object(j.a)(Object(h.a)(i),qa)[qa]=c,Object(j.a)(Object(h.a)(i),Fa)[Fa]&&!(i._getModel()instanceof Sa))throw new M('only ModelArray with contained model instance of "Model" may be isolated');var f,d=Object(X.a)(Object(j.a)(Object(h.a)(i),Xa)[Xa]);try{for(d.s();!(f=d.n()).done;){var b=f.value;if(!b.isAllowedModel(Object(h.a)(i)))throw new M("restriction doesn't allow specified model"+i.getClassName())}}catch(p){d.e(p)}finally{d.f()}var v,O=Object(X.a)(Object(j.a)(Object(h.a)(i),qa)[qa]);try{for(O.s();!(v=O.n()).done;){var g=v.value;if(!g.isAllowedModel(i._getModel()))throw new M("restriction doesn't allow specified model"+i._getModel().getClassName())}}catch(p){O.e(p)}finally{O.f()}return Object.freeze(Object(j.a)(Object(h.a)(i),Xa)[Xa]),Object.freeze(Object(j.a)(Object(h.a)(i),qa)[qa]),i}return Object(l.a)(n,[{key:"getClassName",value:function(){return"ModelArray"}},{key:"getElementName",value:function(){return Object(j.a)(this,Ra)[Ra]}},{key:"isAssociative",value:function(){return Object(j.a)(this,Da)[Da]}},{key:"isNotNullElement",value:function(){return Object(j.a)(this,Ua)[Ua]}},{key:"isIsolatedElement",value:function(){return Object(j.a)(this,Fa)[Fa]}},{key:"getArrayRestrictions",value:function(){return Object(j.a)(this,Xa)[Xa]}},{key:"getElementRestrictions",value:function(){return Object(j.a)(this,qa)[qa]}},{key:"getObjectInstance",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new ut(this,e)}},{key:"getDimensionsCount",value:function(){return this._getModel()instanceof n?this._getModel().getDimensionsCount()+1:1}},{key:"_isNextLevelFirstLevel",value:function(e){return!1}},{key:"_export",value:function(e,t,n,a,r,i,o){var c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(null===e)return null;a&&!n.mustValidate()||e.validate();var s,u,l,h=n.createArrayNode(t);c=c||Object(j.a)(this,Fa)[Fa];var f,d=Object(X.a)(e);try{for(d.s();!(f=d.n()).done;){var b=Object(F.a)(f.value,2);s=b[0],u=b[1];try{null===u&&null!==i?(l=n.createNode(Object(j.a)(this,Ra)[Ra]),i.push(l)):l=this.getLoadedModel()._export(u,Object(j.a)(this,Ra)[Ra],n,a,r,i,o,c),Object(j.a)(this,Da)[Da]?n.addAssociativeValue(h,l,s,Object(j.a)(this,Ra)[Ra]):n.addValue(h,l,Object(j.a)(this,Ra)[Ra])}catch(v){throw new ae(v,s)}}}catch(O){d.e(O)}finally{d.f()}return h}},{key:"_exportId",value:function(e,t,n,a,r){var i,o,c,s,u=n.createArrayNode(t),l=Object(X.a)(e);try{for(l.s();!(s=l.n()).done;){var h=Object(F.a)(s.value,2);i=h[0],o=h[1];try{null===o?null!==r?(c=n.createNode(Object(j.a)(this,Ra)[Ra]),r.push(c)):c=null:c=this.getLoadedModel()._exportId(o,Object(j.a)(this,Ra)[Ra],n,a,r),Object(j.a)(this,Da)[Da]?n.addAssociativeValue(u,c,i,Object(j.a)(this,Ra)[Ra]):n.addValue(u,c,Object(j.a)(this,Ra)[Ra])}catch(f){throw new ae(f,i)}}}catch(d){l.e(d)}finally{l.f()}return u}},{key:"_import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i,o,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.length>4&&void 0!==c[4]&&c[4],!n.isNullValue(t)){e.next=3;break}return e.abrupt("return",null);case 3:if(n.isArrayNodeValue(t,Object(j.a)(this,Da)[Da])){e.next=5;break}throw new oe(t,n.getArrayNodeClasses().join(" or "));case 5:return e.next=7,this.getModel();case 7:return o=this.getObjectInstance(!1),e.next=10,this._fillObject(o,t,n,a,r,i);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"_fillObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r,i){var o,c,s,u,l,h,f,d,b=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=b.length>5&&void 0!==b[5]&&b[5],t instanceof ut){e.next=3;break}throw new re(t,"ComhonArray",1);case 3:o=o||Object(j.a)(this,Fa)[Fa],c=this._getInterfacedElements(n,a),s=Array.isArray(c)?c.keys():Object.keys(c),u=Object(X.a)(s),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=28;break}return h=l.value,e.prev=11,f=c[h],e.next=15,this.getLoadedModel()._import(f,a,r,i,o);case 15:d=e.sent,Object(j.a)(this,Da)[Da]?t.setValue(h,d,a.hasToFlagValuesAsUpdated()):t.pushValue(d,a.hasToFlagValuesAsUpdated()),e.next=26;break;case 19:if(e.prev=19,e.t0=e.catch(11),!(e.t0 instanceof M)){e.next=25;break}throw new se(e.t0,h);case 25:throw e.t0;case 26:e.next=9;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(7),u.e(e.t1);case 33:return e.prev=33,u.f(),e.finish(33);case 36:r&&!a.mustValidate()||t.validate(),t.setIsLoaded(!0);case 38:case"end":return e.stop()}}),e,this,[[7,30,33,36],[11,19]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}()},{key:"_importId",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a,r){var i,o,c,s,u,l,h,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isNullValue(t)){e.next=2;break}return e.abrupt("return",null);case 2:if(n.isArrayNodeValue(t,Object(j.a)(this,Da)[Da])){e.next=4;break}throw new oe(t,n.getArrayNodeClasses().join(" or "));case 4:return e.next=6,this.getModel();case 6:i=this.getObjectInstance(!1),o=this._getInterfacedElements(t,n),c=Array.isArray(o)?o.keys():Object.keys(o),s=Object(X.a)(c),e.prev=10,s.s();case 12:if((u=s.n()).done){e.next=21;break}return l=u.value,h=o[l],e.next=17,this.getLoadedModel()._importId(h,n,!1,r);case 17:f=e.sent,Object(j.a)(this,Da)[Da]?i.setValue(l,f,n.hasToFlagValuesAsUpdated()):i.pushValue(f,n.hasToFlagValuesAsUpdated());case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),s.e(e.t0);case 26:return e.prev=26,s.f(),e.finish(26);case 29:return a&&!n.mustValidate()||i.validate(),i.setIsLoaded(!0),e.abrupt("return",i);case 32:case"end":return e.stop()}}),e,this,[[10,23,26,29]])})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"import",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){var a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(r.length>2&&void 0!==r[2])||r[2],e.prev=1,e.abrupt("return",this._importRoot(t,n,null,a));case 5:if(e.prev=5,e.t0=e.catch(1),!(e.t0 instanceof M)){e.next=11;break}throw new se(e.t0);case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fillObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n,a){var r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(i.length>3&&void 0!==i[3])||i[3],this.verifValue(t),e.prev=2,e.next=5,this._importRoot(n,a,t,r);case 5:if(e.sent===t){e.next=8;break}throw new M("invalid object instance");case 8:return e.abrupt("return",t);case 11:if(e.prev=11,e.t0=e.catch(2),!(e.t0 instanceof M)){e.next=17;break}throw new se(e.t0);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"_importRoot",value:function(){var e=Object(w.a)(m.a.mark((function e(t,a){var r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:null,i=o.length>3&&void 0!==o[3]&&o[3],a.isArrayNodeValue(t,this.isAssociative)){e.next=4;break}throw new La(t,a);case 4:return e.abrupt("return",Object(q.a)(Object(Y.a)(n.prototype),"_importRoot",this).call(this,t,a,r,i));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getRootObject",value:function(){var e=Object(w.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getObjectInstance(!1));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_initObjectCollectionInterfacer",value:function(e,t){var a,r=this.getLoadedUniqueModel();if(r instanceof Sa&&r.hasIdProperties())if(t===ye.MERGE)a=new Q(e);else{a=new Q;var i,o=Object(X.a)(n.getOneDimensionalValues(e,!0));try{for(o.s();!(i=o.n()).done;){var c=i.value;a.addStartObject(c)}}catch(s){o.e(s)}finally{o.f()}}else a=new Q;return a}},{key:"_getInterfacedElements",value:function(e,t){return t instanceof ke?Object(j.a)(this,Da)[Da]?this.interfacer.nodeToObject(e):this.interfacer.nodeToArray(e):e}},{key:"verifValue",value:function(e){if(!(e instanceof ut))throw new oe(e,"ComhonArray(".concat(this.getUniqueModelName(),")"));return this._verifModel(e.getModel(),e,0)}},{key:"_verifModel",value:function(e,t,a){if(e===this)return!0;if(!(e instanceof n))throw new st(t,this,a);if(Object(j.a)(this,Da)[Da]!==Object(j.a)(e,Da)[Da])throw new st(t,this,a);if(Object(j.a)(this,Ra)[Ra]!==Object(j.a)(e,Ra)[Ra])throw new st(t,this,a);if(Object(j.a)(this,Ua)[Ua]!==Object(j.a)(e,Ua)[Ua])throw new st(t,this,a);if(Object(j.a)(this,Fa)[Fa]!==Object(j.a)(e,Fa)[Fa])throw new st(t,this,a);if(e.getLoadedModel()!==this._getModel())if(this._getModel()instanceof n)this._getModel()._verifModel(e.getLoadedModel(),t,a+1);else if(!(e.getLoadedModel()instanceof Sa)||!e.getLoadedModel().isInheritedFrom(this._getModel()))throw new st(t,this,a);if(!tt.compare(Object(j.a)(this,Xa)[Xa],e.getArrayRestrictions()))throw new st(t,this,a);if(!tt.compare(Object(j.a)(this,qa)[qa],e.getElementRestrictions()))throw new st(t,this,a);return!0}},{key:"verifElementValue",value:function(e){if(null===e){if(Object(j.a)(this,Ua)[Ua])throw new it(e,new At)}else{this.getLoadedModel().verifValue(e);var t=tt.getFirstNotSatisifed(Object(j.a)(this,qa)[qa],e);if(null!==t)throw new it(e,t)}return!0}},{key:"isEqual",value:function(e){return this===e||Object(q.a)(Object(Y.a)(n.prototype),"isEqual",this).call(this,e)&&tt.compare(Object(j.a)(this,Xa)[Xa],e.getArrayRestrictions())&&tt.compare(Object(j.a)(this,qa)[qa],e.getElementRestrictions())}}],[{key:"getOneDimensionalValues",value:function(e){for(var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],i=[e];i.length>0;)if((t=i.pop()).getModel().getLoadedModel()instanceof n){var o,c=Object(X.a)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;null!==s[1]&&i.push(s[1])}}catch(f){c.e(f)}finally{c.f()}}else{var u,l=Object(X.a)(t);try{for(l.s();!(u=l.n()).done;){var h=u.value;a&&null===h[1]||r.push(h[1])}}catch(f){l.e(f)}finally{l.f()}}return r}}]),n}(Ce),Ga=(n(59),n(60),new(function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"getModelWithApiModelName",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i,o,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],a=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,o=bt.getModelName(t),o=null!==(r=o)&&void 0!==r?r:t,e.next=7,Un.getInstance().getInstanceModel(o);case 7:return i=e.sent,n&&(i=new Ya(i)),e.abrupt("return",i);case 12:e.prev=12,e.t0=e.catch(2),this.manageError(e.t0,a,"model "+t);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isRequestable",value:function(){var e=Object(w.a)(m.a.mark((function e(t){var n,a,r,i,o,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,a=t instanceof Ya?t.getLoadedModel():t,e.next=4,a.getOptions();case 4:if(r=e.sent,i=t instanceof Ya?"collection":"unique",null===(o=r.issetValue(i)&&r.getValue(i).issetValue("allowed_methods")?r.getValue(i).getValue("allowed_methods"):null)){e.next=26;break}c=Object(X.a)(o),e.prev=9,c.s();case 11:if((s=c.n()).done){e.next=18;break}if("GET"!==s.value[1]){e.next=16;break}return n=!0,e.abrupt("break",18);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,null,[[9,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"manageError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e instanceof lt?401===e.getCode()&&t?t():alert(this.getErrorSentence(e.getCode(),n)):(console.log(e),e instanceof M?alert(e.getMessage()):alert("unknown server error when trying to retrieve models"))}},{key:"getErrorSentence",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(e){case 401:t="unauthorized (login and retry)";break;case 403:t="forbidden";break;case 404:t="not found";break;case 405:t="not requestable";break;default:t="unknown error"}return"".concat(n," ").concat(t," ").concat(a)}}]),e}())),za=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isClickable:!1},a.getComponentList=a.getComponentList.bind(Object(h.a)(a)),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setIsClickable()}},{key:"setIsClickable",value:function(){var e=Object(w.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.isAggregation){e.next=3;break}return this.setState({isClickable:!0}),e.abrupt("return");case 3:if(this.props.isForeign&&!this.props.isRoot&&this.props.object.getModel().hasIdProperties()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Ga.isRequestable(this.props.object.getModel());case 7:if(!e.sent){e.next=9;break}this.setState({isClickable:!0});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getValueComponent",value:function(e,t){var n=e.getValue(t),r=e.getModel().getProperty(t).getLoadedModel();return Object(a.jsxs)("div",{className:"value",children:[Object(a.jsxs)("span",{className:"property",children:[t," :"]}),Wa.generate(n,r)]},t)}},{key:"getComponentList",value:function(e){var t,n=[],r=Object(X.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(this.getValueComponent(e,i[0]))}}catch(o){r.e(o)}finally{r.f()}return e.getModel()!==this.props.componentModel&&n.push(Object(a.jsxs)("div",{className:"value",children:[Object(a.jsx)("span",{className:"property",children:"inheritance :"}),Object(a.jsx)("span",{className:"simple inheritance",children:e.getModel().getName()})]},"inheritance-")),n}},{key:"handleClick",value:function(e){var t;if(e.stopPropagation(),this.state.isClickable){var n=bt.getApiModelName(this.props.object.getModel().getName()),a="/"+(n=null!==(t=n)&&void 0!==t?t:this.props.object.getModel().getName())+"/"+this.props.object.getId();this.props.isRoot||this.props.location.pathname===a||this.props.history.push(a)}}},{key:"render",value:function(){return this.props.isForeign?Object(a.jsx)("span",{className:this.state.isClickable?"foreign simple clickable":"foreign simple",onClick:this.handleClick,children:this.props.object.getId()}):Object(a.jsx)("div",{className:this.state.isClickable?"details clickable":"details",onClick:this.handleClick,children:this.getComponentList(this.props.object)})}}]),n}(i.a.Component),Ba=Object(b.f)(za),Ha=(n(61),Object(g.a)("isForeign")),Ka=Object(g.a)("isAggregation"),Ja=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),a=t.call(this,e),Object.defineProperty(Object(h.a)(a),Ha,{writable:!0,value:!1}),Object.defineProperty(Object(h.a)(a),Ka,{writable:!0,value:!1}),e.isForeign&&(Object(j.a)(Object(h.a)(a),Ha)[Ha]=!0),e.isAggregation&&(Object(j.a)(Object(h.a)(a),Ka)[Ka]=!0),a.getComponentList=a.getComponentList.bind(Object(h.a)(a)),a.getValueComponent=a.getValueComponent.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"getValueComponent",value:function(e,t,n){var r=e.getValue(t),i=e.getModel().getLoadedModel(),o=n&&null!==r.getId()?r.getId():t,c=i instanceof Ya||i instanceof Sa;return Object(a.jsxs)("div",{children:[c?Object(a.jsx)("div",{className:"separator"}):null,c?null:e.getModel().isAssociative()?"".concat(t," : "):"- ",Wa.generate(r,i,Object(j.a)(this,Ha)[Ha],Object(j.a)(this,Ka)[Ka])]},o)}},{key:"getComponentList",value:function(e){var t,n=e instanceof ut&&e.getModel().getLoadedModel()instanceof Sa&&e.getModel().getLoadedModel().hasIdProperties(),a=[],r=Object(X.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;a.push(this.getValueComponent(e,i[0],n))}}catch(o){r.e(o)}finally{r.f()}return a}},{key:"render",value:function(){var e=this.props.object&&(this.props.object.getModel().getLoadedModel()instanceof Ya||this.props.object.getModel().getLoadedModel()instanceof Sa);return this.props.object.count()>0?Object(a.jsx)("div",{className:e?"complexList":"simpleList",children:this.getComponentList(this.props.object)}):this.props.isRoot?Object(a.jsx)("span",{style:{fontSize:"30px"},children:"no results"}):Object(a.jsx)("span",{className:"simple null",children:"<empty>"})}}]),n}(i.a.Component),Wa=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"generate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null===e)return Object(a.jsx)("span",{className:"simple null",children:"null"});switch(t instanceof Ve&&(t=t.getLoadedModel(),n=!0),t.getClassName()){case"Model":return Object(a.jsx)(Ba,{object:e,componentModel:t,isRoot:i,isForeign:n,isAggregation:r});case"ModelArray":return Object(a.jsx)(Ja,{object:e,componentModel:t,isRoot:i,isForeign:n,isAggregation:r});case"integer":case"index":case"float":case"string":return Object(a.jsx)("span",{className:"simple",children:e});case"percentage":return Object(a.jsx)("span",{className:"simple",children:100*e+" %"});case"dateTime":return Object(a.jsx)("span",{className:"simple",children:e.toLocaleDateString()+" at "+e.toLocaleTimeString()});case"boolean":return e?Object(a.jsx)("span",{className:"simple true",children:"true"}):Object(a.jsx)("span",{className:"simple false",children:"false"});default:throw new Error("invalid model "+t.getClassName())}}}]),e}(),Qa=(n(62),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)("div",{className:"spinner-border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})})}}]),n}(i.a.Component)),Za=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={object:null,error:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.initComponent()}},{key:"initComponent",value:function(){var e=Object(w.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.model){e.next=2;break}throw new M("invalid model");case 2:return e.next=4,Ga.isRequestable(this.props.model);case 4:e.sent?this.setObject():this.setState({object:null,error:"model not found or not requestable"});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setObject",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.props.model instanceof Sa)){e.next=7;break}return e.next=4,this.retrieveComhonObject();case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.retrieveComhonArray();case 9:e.t0=e.sent;case 10:null===(t=e.t0)?this.setState({object:null,error:Ga.getErrorSentence(404)}):this.setState({object:t}),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),Ga.manageError(e.t1,this.props.onUnauthorized);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveComhonArray",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bt.getApiModelName(this.props.model.getLoadedModel().getName()),n=null!==(t=n)&&void 0!==t?t:this.props.model.getName(),e.next=4,x.get(n);case 4:if(200!==(a=e.sent).status){e.next=11;break}return e.next=8,this.props.model.import(JSON.parse(a.responseText),new Ue);case 8:return e.abrupt("return",e.sent);case 11:throw new lt(a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveComhonObject",value:function(){var e=Object(w.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.id,this.props.model.hasUniqueIdProperty&&this.props.model.getUniqueIdProperty().getLoadedModel().castValue&&(t=this.props.model.getUniqueIdProperty().getLoadedModel().castValue(t)),e.abrupt("return",this.props.model.loadObject(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.model&&this.props.model instanceof Ya;return Object(a.jsx)("div",{children:null!==this.state.object?Wa.generate(this.state.object,this.props.model,!1,e,!0):this.state.error?this.state.error:Object(a.jsx)(Qa,{})})}}]),n}(i.a.Component),$a=(n(34),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{})}}]),n}(i.a.Component)),er=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={model:null,error:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Ga.getModelWithApiModelName(this.props.match.params.pathModel,!0,this.props.onUnauthorized).then((function(t){null===t?e.setState({error:!0}):e.setState({model:t})}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h1",{className:"title",children:["list ",this.props.match.params.pathModel]}),this.state.model?Object(a.jsxs)("div",{children:[Object(a.jsx)($a,{model:this.state.model,onUnauthorized:this.props.onUnauthorized}),Object(a.jsx)(Za,{model:this.state.model,onUnauthorized:this.props.onUnauthorized})]}):this.state.error?null:Object(a.jsx)(Qa,{})]})}}]),n}(i.a.Component),tr=Object(b.f)(er),nr=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={model:null,error:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Ga.getModelWithApiModelName(this.props.match.params.pathModel,!1,this.props.onUnauthorized).then((function(t){null===t?e.setState({error:!0}):e.setState({model:t})}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h1",{className:"title",children:[this.props.match.params.pathModel," :",Object(a.jsx)("span",{style:{marginLeft:"15px",color:"rgba(180, 180, 180)"},children:this.props.match.params.id})]}),this.state.model?Object(a.jsx)("div",{children:Object(a.jsx)(Za,{model:this.state.model,id:this.props.match.params.id,onUnauthorized:this.props.onUnauthorized})}):this.state.error?null:Object(a.jsx)(Qa,{})]})}}]),n}(i.a.Component),ar=Object(b.f)(nr),rr=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={logged:!1,appInitialized:!1,models:[]},a.handleLogin=a.handleLogin.bind(Object(h.a)(a)),a.showLoginModal=a.showLoginModal.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;I.initialize({baseURI:"http://localhost:8000/api/comhon/"});var t=p.getCookie("token");""!==t?T.validateToken(t).then((function(n){200===n.status?(T.importToken(t,!1),e.initApp(!0)):401===n.status?e.initApp(!1):alert("unknown server error when trying to initialize application")})).catch((function(e){e instanceof M?alert(e.getMessage()):alert("unknown error during token validation")})):this.initApp(!1)}},{key:"initApp",value:function(e){var t=this;return new Promise((function(n){bt.getApiModelNames(!e).then((function(a){return t.setState({models:a,appInitialized:!0,logged:e}),n()})).catch((function(a){return a instanceof M?a instanceof lt&&401===a.getCode&&!e?t.setState({appInitialized:!0,logged:e}):alert(a.getMessage()):alert("unknown error during application initialization"),n()}))}))}},{key:"handleLogin",value:function(){var e=this;this.initApp(!0).then((function(){"/login"===e.props.location.pathname||"/login/"===e.props.location.pathname?e.props.history.push("/home"):O()(document.getElementById("loginModal")).modal("hide")}))}},{key:"showLoginModal",value:function(){O()(document.getElementById("loginModal")).modal({backdrop:"static",keyboard:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(U,{logged:this.state.logged,appInitialized:this.state.appInitialized,models:this.state.models}),Object(a.jsx)("div",{className:"App",children:this.state.appInitialized?Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{exact:!0,path:"/",component:L}),Object(a.jsx)(b.a,{exact:!0,path:"/home",component:L}),Object(a.jsx)(b.a,{exact:!0,path:"/login",component:function(){return Object(a.jsx)(D,{onLogin:e.handleLogin})}}),Object(a.jsx)(b.a,{path:"/:pathModel/:id",component:function(){return Object(a.jsx)(ar,{onUnauthorized:e.showLoginModal},Date.now())}}),Object(a.jsx)(b.a,{path:"/:pathModel",component:function(){return Object(a.jsx)(tr,{onUnauthorized:e.showLoginModal},Date.now())}})]}):Object(a.jsx)(Qa,{})}),Object(a.jsx)("div",{id:"loginModal",className:"modal",tabIndex:"-1",children:Object(a.jsx)("div",{className:"modal-dialog",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("h5",{className:"modal-title",children:"Login"})}),Object(a.jsx)(D,{onLogin:this.handleLogin})]})})})]})}}]),n}(i.a.Component),ir=Object(b.f)(rr);c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(s.a,{children:Object(a.jsx)(ir,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.255fa69b.chunk.js.map